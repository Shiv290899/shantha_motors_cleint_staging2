import{v as I,aO as Ve,a2 as De,s as qe,P as W,aP as le,aQ as Qe,a6 as re,C as _,y as se,f as k,S as Xe,N as Ze,aC as Ge,aR as Ue,a1 as B,aS as Ye,u as U,ac as Je,aN as ae,aT as Ke,aU as et,a5 as tt,aV as nt,Q as ot}from"./TextArea-BDVSLBQS.js";import{r as l,R as O}from"./index-DByWGH7d.js";import{B as A,c as ce,u as lt}from"./button-BmMOSO5i.js";import{R as rt,a as st}from"./index-fiQTrVnU.js";import{R as at}from"./index-mc3XMWnF.js";import{u as ie,D as ct,p as it,a as ut,P as ft}from"./index-BQHoEo7h.js";import{u as dt,p as Y}from"./useClosable-Dko-A-M4.js";import{S as mt}from"./Skeleton-wxJCniSA.js";import{w as Ct}from"./PurePanel-B8np65kh.js";function gt(){const[e,n]=l.useState([]),r=l.useCallback(t=>(n(o=>[].concat(I(o),[t])),()=>{n(o=>o.filter(c=>c!==t))}),[]);return[e,r]}function L(e){return!!e?.then}const ue=e=>{const{type:n,children:r,prefixCls:t,buttonProps:o,close:c,autoFocus:C,emitEvent:u,isSilent:a,quitOnNullishReturnValue:m,actionFn:s}=e,f=l.useRef(!1),g=l.useRef(null),[v,b]=Ve(!1),d=(...i)=>{c?.apply(void 0,i)};l.useEffect(()=>{let i=null;return C&&(i=setTimeout(()=>{var x;(x=g.current)===null||x===void 0||x.focus({preventScroll:!0})})),()=>{i&&clearTimeout(i)}},[]);const y=i=>{L(i)&&(b(!0),i.then((...x)=>{b(!1,!0),d.apply(void 0,x),f.current=!1},x=>{if(b(!1,!0),f.current=!1,!a?.())return Promise.reject(x)}))},p=i=>{if(f.current)return;if(f.current=!0,!s){d();return}let x;if(u){if(x=s(i),m&&!L(x)){f.current=!1,d(i);return}}else if(s.length)x=s(c),f.current=!1;else if(x=s(),!L(x)){d();return}y(x)};return l.createElement(A,Object.assign({},ce(n),{onClick:p,loading:v,prefixCls:t},o,{ref:g}),r)},w=O.createContext({}),{Provider:fe}=w,J=()=>{const{autoFocusButton:e,cancelButtonProps:n,cancelTextLocale:r,isSilent:t,mergedOkCancel:o,rootPrefixCls:c,close:C,onCancel:u,onConfirm:a}=l.useContext(w);return o?O.createElement(ue,{isSilent:t,actionFn:u,close:(...m)=>{C?.apply(void 0,m),a?.(!1)},autoFocus:e==="cancel",buttonProps:n,prefixCls:`${c}-btn`},r):null},K=()=>{const{autoFocusButton:e,close:n,isSilent:r,okButtonProps:t,rootPrefixCls:o,okTextLocale:c,okType:C,onConfirm:u,onOk:a}=l.useContext(w);return O.createElement(ue,{isSilent:r,type:C||"primary",actionFn:a,close:(...m)=>{n?.apply(void 0,m),u?.(!0)},autoFocus:e==="ok",buttonProps:t,prefixCls:`${o}-btn`},c)},vt=()=>De()&&window.document.documentElement;function ee(){}const pt=l.createContext({add:ee,remove:ee});function bt(e){const n=l.useContext(pt),r=l.useRef(null);return qe(o=>{if(o){const c=e?o.querySelector(e):o;n.add(c),r.current=c}else n.remove(r.current)})}const te=()=>{const{cancelButtonProps:e,cancelTextLocale:n,onCancel:r}=l.useContext(w);return O.createElement(A,Object.assign({onClick:r},e),n)},ne=()=>{const{confirmLoading:e,okButtonProps:n,okType:r,okTextLocale:t,onOk:o}=l.useContext(w);return O.createElement(A,Object.assign({},ce(r),{loading:e,onClick:o},n),t)};function de(e,n){return O.createElement("span",{className:`${e}-close-x`},n||O.createElement(re,{className:`${e}-close-icon`}))}const me=e=>{const{okText:n,okType:r="primary",cancelText:t,confirmLoading:o,onOk:c,onCancel:C,okButtonProps:u,cancelButtonProps:a,footer:m}=e,[s]=W("Modal",le()),f=n||s?.okText,g=t||s?.cancelText,v={confirmLoading:o,okButtonProps:u,cancelButtonProps:a,okTextLocale:f,cancelTextLocale:g,okType:r,onOk:c,onCancel:C},b=O.useMemo(()=>v,I(Object.values(v)));let d;return typeof m=="function"||typeof m>"u"?(d=O.createElement(O.Fragment,null,O.createElement(te,null),O.createElement(ne,null)),typeof m=="function"&&(d=m(d,{OkBtn:ne,CancelBtn:te})),d=O.createElement(fe,{value:b},d)):d=m,O.createElement(Qe,{disabled:!1},d)};var xt=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};let z;const yt=e=>{z={x:e.pageX,y:e.pageY},setTimeout(()=>{z=null},100)};vt()&&document.documentElement.addEventListener("click",yt,!0);const Ce=e=>{const{prefixCls:n,className:r,rootClassName:t,open:o,wrapClassName:c,centered:C,getContainer:u,focusTriggerAfterClose:a=!0,style:m,visible:s,width:f=520,footer:g,classNames:v,styles:b,children:d,loading:y,confirmLoading:p,zIndex:i,mousePosition:x,onOk:j,onCancel:T,destroyOnHidden:h,destroyOnClose:$e,panelRef:je=null}=e,Te=xt(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading","confirmLoading","zIndex","mousePosition","onOk","onCancel","destroyOnHidden","destroyOnClose","panelRef"]),{getPopupContainer:Se,getPrefixCls:H,direction:ke,modal:P}=l.useContext(_),V=S=>{p||T?.(S)},Ie=S=>{j?.(S)},E=H("modal",n),D=H(),q=se(E),[Ne,Q,we]=ie(E,q),Re=k(c,{[`${E}-centered`]:C??P?.centered,[`${E}-wrap-rtl`]:ke==="rtl"}),Fe=g!==null&&!y?l.createElement(me,Object.assign({},e,{onOk:Ie,onCancel:V})):null,[X,Z,Me,Be]=dt(Y(e),Y(P),{closable:!0,closeIcon:l.createElement(re,{className:`${E}-close-icon`}),closeIconRender:S=>de(E,S)}),_e=bt(`.${E}-content`),Le=Xe(je,_e),[ze,We]=Ze("Modal",i),[Ae,F]=l.useMemo(()=>f&&typeof f=="object"?[void 0,f]:[f,void 0],[f]),He=l.useMemo(()=>{const S={};return F&&Object.keys(F).forEach(G=>{const M=F[G];M!==void 0&&(S[`--${E}-${G}-width`]=typeof M=="number"?`${M}px`:M)}),S},[F]);return Ne(l.createElement(Ge,{form:!0,space:!0},l.createElement(Ue.Provider,{value:We},l.createElement(ct,Object.assign({width:Ae},Te,{zIndex:ze,getContainer:u===void 0?Se:u,prefixCls:E,rootClassName:k(Q,t,we,q),footer:Fe,visible:o??s,mousePosition:x??z,onClose:V,closable:X&&Object.assign({disabled:Me,closeIcon:Z},Be),closeIcon:Z,focusTriggerAfterClose:a,transitionName:B(D,"zoom",e.transitionName),maskTransitionName:B(D,"fade",e.maskTransitionName),className:k(Q,r,P?.className),style:Object.assign(Object.assign(Object.assign({},P?.style),m),He),classNames:Object.assign(Object.assign(Object.assign({},P?.classNames),v),{wrapper:k(Re,v?.wrapper)}),styles:Object.assign(Object.assign({},P?.styles),b),panelRef:Le,destroyOnClose:h??$e}),y?l.createElement(mt,{active:!0,title:!1,paragraph:{rows:4},className:`${E}-body-skeleton`}):d))))},Ot=e=>{const{componentCls:n,titleFontSize:r,titleLineHeight:t,modalConfirmIconSize:o,fontSize:c,lineHeight:C,modalTitleHeight:u,fontHeight:a,confirmBodyPadding:m}=e,s=`${n}-confirm`;return{[s]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${s}-body-wrapper`]:Object.assign({},Je()),[`&${n} ${n}-body`]:{padding:m},[`${s}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(a).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(u).sub(o).equal()).div(2).equal()}},[`${s}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${U(e.marginSM)})`},[`${e.iconCls} + ${s}-paragraph`]:{maxWidth:`calc(100% - ${U(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${s}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:r,lineHeight:t},[`${s}-content`]:{color:e.colorText,fontSize:c,lineHeight:C},[`${s}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${s}-error ${s}-body > ${e.iconCls}`]:{color:e.colorError},[`${s}-warning ${s}-body > ${e.iconCls},
        ${s}-confirm ${s}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${s}-info ${s}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${s}-success ${s}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},Pt=Ye(["Modal","confirm"],e=>{const n=it(e);return Ot(n)},ut,{order:-1e3});var ht=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};function ge(e){const{prefixCls:n,icon:r,okText:t,cancelText:o,confirmPrefixCls:c,type:C,okCancel:u,footer:a,locale:m}=e,s=ht(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=r;if(!r&&r!==null)switch(C){case"info":f=l.createElement(at,null);break;case"success":f=l.createElement(st,null);break;case"error":f=l.createElement(tt,null);break;default:f=l.createElement(rt,null)}const g=u??C==="confirm",v=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[b]=W("Modal"),d=m||b,y=t||(g?d?.okText:d?.justOkText),p=o||d?.cancelText,i=Object.assign({autoFocusButton:v,cancelTextLocale:p,okTextLocale:y,mergedOkCancel:g},s),x=l.useMemo(()=>i,I(Object.values(i))),j=l.createElement(l.Fragment,null,l.createElement(J,null),l.createElement(K,null)),T=e.title!==void 0&&e.title!==null,h=`${c}-body`;return l.createElement("div",{className:`${c}-body-wrapper`},l.createElement("div",{className:k(h,{[`${h}-has-title`]:T})},f,l.createElement("div",{className:`${c}-paragraph`},T&&l.createElement("span",{className:`${c}-title`},e.title),l.createElement("div",{className:`${c}-content`},e.content))),a===void 0||typeof a=="function"?l.createElement(fe,{value:x},l.createElement("div",{className:`${c}-btns`},typeof a=="function"?a(j,{OkBtn:K,CancelBtn:J}):j)):a,l.createElement(Pt,{prefixCls:n}))}const Et=e=>{const{close:n,zIndex:r,maskStyle:t,direction:o,prefixCls:c,wrapClassName:C,rootPrefixCls:u,bodyStyle:a,closable:m=!1,onConfirm:s,styles:f}=e,g=`${c}-confirm`,v=e.width||416,b=e.style||{},d=e.mask===void 0?!0:e.mask,y=e.maskClosable===void 0?!1:e.maskClosable,p=k(g,`${g}-${e.type}`,{[`${g}-rtl`]:o==="rtl"},e.className),[,i]=Ke(),x=l.useMemo(()=>r!==void 0?r:i.zIndexPopupBase+et,[r,i]);return l.createElement(Ce,Object.assign({},e,{className:p,wrapClassName:k({[`${g}-centered`]:!!e.centered},C),onCancel:()=>{n?.({triggerCancel:!0}),s?.(!1)},title:"",footer:null,transitionName:B(u||"","zoom",e.transitionName),maskTransitionName:B(u||"","fade",e.maskTransitionName),mask:d,maskClosable:y,style:b,styles:Object.assign({body:a,mask:t},f),width:v,zIndex:x,closable:m}),l.createElement(ge,Object.assign({},e,{confirmPrefixCls:g})))},ve=e=>{const{rootPrefixCls:n,iconPrefixCls:r,direction:t,theme:o}=e;return l.createElement(ae,{prefixCls:n,iconPrefixCls:r,direction:t,theme:o},l.createElement(Et,Object.assign({},e)))},N=[];let pe="";function be(){return pe}const $t=e=>{var n,r;const{prefixCls:t,getContainer:o,direction:c}=e,C=le(),u=l.useContext(_),a=be()||u.getPrefixCls(),m=t||`${a}-modal`;let s=o;return s===!1&&(s=void 0),O.createElement(ve,Object.assign({},e,{rootPrefixCls:a,prefixCls:m,iconPrefixCls:u.iconPrefixCls,theme:u.theme,direction:c??u.direction,locale:(r=(n=u.locale)===null||n===void 0?void 0:n.Modal)!==null&&r!==void 0?r:C,getContainer:s}))};function R(e){const n=nt(),r=document.createDocumentFragment();let t=Object.assign(Object.assign({},e),{close:a,open:!0}),o,c;function C(...s){var f;if(s.some(b=>b?.triggerCancel)){var v;(f=e.onCancel)===null||f===void 0||(v=f).call.apply(v,[e,()=>{}].concat(I(s.slice(1))))}for(let b=0;b<N.length;b++)if(N[b]===a){N.splice(b,1);break}c()}function u(s){clearTimeout(o),o=setTimeout(()=>{const f=n.getPrefixCls(void 0,be()),g=n.getIconPrefixCls(),v=n.getTheme(),b=O.createElement($t,Object.assign({},s));c=lt()(O.createElement(ae,{prefixCls:f,iconPrefixCls:g,theme:v},n.holderRender?n.holderRender(b):b),r)})}function a(...s){t=Object.assign(Object.assign({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),C.apply(this,s)}}),t.visible&&delete t.visible,u(t)}function m(s){typeof s=="function"?t=s(t):t=Object.assign(Object.assign({},t),s),u(t)}return u(t),N.push(a),{destroy:a,update:m}}function xe(e){return Object.assign(Object.assign({},e),{type:"warning"})}function ye(e){return Object.assign(Object.assign({},e),{type:"info"})}function Oe(e){return Object.assign(Object.assign({},e),{type:"success"})}function Pe(e){return Object.assign(Object.assign({},e),{type:"error"})}function he(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function jt({rootPrefixCls:e}){pe=e}var Tt=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const St=(e,n)=>{var r,{afterClose:t,config:o}=e,c=Tt(e,["afterClose","config"]);const[C,u]=l.useState(!0),[a,m]=l.useState(o),{direction:s,getPrefixCls:f}=l.useContext(_),g=f("modal"),v=f(),b=()=>{var i;t(),(i=a.afterClose)===null||i===void 0||i.call(a)},d=(...i)=>{var x;if(u(!1),i.some(h=>h?.triggerCancel)){var T;(x=a.onCancel)===null||x===void 0||(T=x).call.apply(T,[a,()=>{}].concat(I(i.slice(1))))}};l.useImperativeHandle(n,()=>({destroy:d,update:i=>{m(x=>{const j=typeof i=="function"?i(x):i;return Object.assign(Object.assign({},x),j)})}}));const y=(r=a.okCancel)!==null&&r!==void 0?r:a.type==="confirm",[p]=W("Modal",ot.Modal);return l.createElement(ve,Object.assign({prefixCls:g,rootPrefixCls:v},a,{close:d,open:C,afterClose:b,okText:a.okText||(y?p?.okText:p?.justOkText),direction:a.direction||s,cancelText:a.cancelText||p?.cancelText},c))},kt=l.forwardRef(St);let oe=0;const It=l.memo(l.forwardRef((e,n)=>{const[r,t]=gt();return l.useImperativeHandle(n,()=>({patchElement:t}),[]),l.createElement(l.Fragment,null,r)}));function Nt(){const e=l.useRef(null),[n,r]=l.useState([]);l.useEffect(()=>{n.length&&(I(n).forEach(C=>{C()}),r([]))},[n]);const t=l.useCallback(c=>function(u){var a;oe+=1;const m=l.createRef();let s;const f=new Promise(y=>{s=y});let g=!1,v;const b=l.createElement(kt,{key:`modal-${oe}`,config:c(u),ref:m,afterClose:()=>{v?.()},isSilent:()=>g,onConfirm:y=>{s(y)}});return v=(a=e.current)===null||a===void 0?void 0:a.patchElement(b),v&&N.push(v),{destroy:()=>{function y(){var p;(p=m.current)===null||p===void 0||p.destroy()}m.current?y():r(p=>[].concat(I(p),[y]))},update:y=>{function p(){var i;(i=m.current)===null||i===void 0||i.update(y)}m.current?p():r(i=>[].concat(I(i),[p]))},then:y=>(g=!0,f.then(y))}},[]);return[l.useMemo(()=>({info:t(ye),success:t(Oe),error:t(Pe),warning:t(xe),confirm:t(he)}),[]),l.createElement(It,{key:"modal-holder",ref:e})]}var wt=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const Rt=e=>{const{prefixCls:n,className:r,closeIcon:t,closable:o,type:c,title:C,children:u,footer:a}=e,m=wt(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:s}=l.useContext(_),f=s(),g=n||s("modal"),v=se(f),[b,d,y]=ie(g,v),p=`${g}-confirm`;let i={};return c?i={closable:o??!1,title:"",footer:"",children:l.createElement(ge,Object.assign({},e,{prefixCls:g,confirmPrefixCls:p,rootPrefixCls:f,content:u}))}:i={closable:o??!0,title:C,footer:a!==null&&l.createElement(me,Object.assign({},e)),children:u},b(l.createElement(ft,Object.assign({prefixCls:g,className:k(d,`${g}-pure-panel`,c&&p,c&&`${p}-${c}`,r,y,v)},m,{closeIcon:de(g,t),closable:o},i)))},Ft=Ct(Rt);function Ee(e){return R(xe(e))}const $=Ce;$.useModal=Nt;$.info=function(n){return R(ye(n))};$.success=function(n){return R(Oe(n))};$.error=function(n){return R(Pe(n))};$.warning=Ee;$.warn=Ee;$.confirm=function(n){return R(he(n))};$.destroyAll=function(){for(;N.length;){const n=N.pop();n&&n()}};$.config=jt;$._InternalPanelDoNotUseOrYouWillBeFired=Ft;export{ue as A,$ as M};

import{r as s,j as e,G as En,R as Dn}from"./index-DByWGH7d.js";import{L as tt,d as re}from"./index-53S8uf0A.js";import{A as Fn,s as nt,l as Tn,b as Vn,g as On,u as Be,n as R,D as Bn,r as Hn}from"./caseInsensitive-GFj-Zur4.js";import{W as Wn,B as ne}from"./button-BmMOSO5i.js";import{M as jt}from"./index-BSIb012r.js";import{S as qn}from"./index-DlPElhKY.js";import{I as G,s as Ne}from"./index-mc3XMWnF.js";import{a as Jt,R as z,S as be}from"./index-C2v3hDcT.js";import{F as j}from"./index-fiQTrVnU.js";import{l as Ln,p as Zt,o as zn,f as en,e as Gt,c as Un,K as Kt,m as Yn,q as _n,r as Qn,u as ve,F as Gn,G as Kn,C as Xn,D as Jn,H as Zn,R as ea,z as Xt,A as N}from"./TextArea-BDVSLBQS.js";import{D as xt}from"./index-BW-IFf4J.js";import{T as Ke}from"./index-eVJyXskz.js";import{C as Xe}from"./index-Bbhzw47L.js";import{D as ta,R as na}from"./PrinterOutlined-De6aMjcs.js";import{I as aa}from"./AntdIcon-DqBt8ItB.js";import{R as oa}from"./PlusOutlined-DysDbfLf.js";import"./useClosable-Dko-A-M4.js";import"./pickAttrs-DLhOEXIt.js";import"./PurePanel-B8np65kh.js";import"./PlusOutlined-68_8d4GS.js";import"./index-BQHoEo7h.js";import"./Skeleton-wxJCniSA.js";import"./EyeOutlined-DF4m-4HC.js";import"./useBubbleLock-CujG_eFi.js";import"./LeftOutlined-BxWPQNPi.js";import"./CheckOutlined-BWW6_Ha2.js";import"./DownOutlined-CAwmfW-2.js";import"./index-CUWDS_la.js";var ia=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],tn=s.forwardRef(function(a,o){var h,c=a.prefixCls,x=c===void 0?"rc-switch":c,f=a.className,C=a.checked,p=a.defaultChecked,g=a.disabled,P=a.loadingIcon,E=a.checkedChildren,U=a.unCheckedChildren,he=a.onClick,Y=a.onChange,se=a.onKeyDown,xe=Ln(a,ia),_=Zt(!1,{value:C,defaultValue:p}),K=zn(_,2),I=K[0],D=K[1];function le(M,X){var ee=I;return g||(ee=M,D(ee),Y?.(ee,X)),ee}function ue(M){M.which===Kt.LEFT?le(!1,M):M.which===Kt.RIGHT&&le(!0,M),se?.(M)}function F(M){var X=le(!I,M);he?.(X,M)}var Z=en(x,f,(h={},Gt(h,"".concat(x,"-checked"),I),Gt(h,"".concat(x,"-disabled"),g),h));return s.createElement("button",Un({},xe,{type:"button",role:"switch","aria-checked":I,disabled:g,className:Z,ref:o,onKeyDown:ue,onClick:F}),P,s.createElement("span",{className:"".concat(x,"-inner")},s.createElement("span",{className:"".concat(x,"-inner-checked")},E),s.createElement("span",{className:"".concat(x,"-inner-unchecked")},U)))});tn.displayName="Switch";const ra=a=>{const{componentCls:o,trackHeightSM:h,trackPadding:c,trackMinWidthSM:x,innerMinMarginSM:f,innerMaxMarginSM:C,handleSizeSM:p,calc:g}=a,P=`${o}-inner`,E=ve(g(p).add(g(c).mul(2)).equal()),U=ve(g(C).mul(2).equal());return{[o]:{[`&${o}-small`]:{minWidth:x,height:h,lineHeight:ve(h),[`${o}-inner`]:{paddingInlineStart:C,paddingInlineEnd:f,[`${P}-checked, ${P}-unchecked`]:{minHeight:h},[`${P}-checked`]:{marginInlineStart:`calc(-100% + ${E} - ${U})`,marginInlineEnd:`calc(100% - ${E} + ${U})`},[`${P}-unchecked`]:{marginTop:g(h).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${o}-handle`]:{width:p,height:p},[`${o}-loading-icon`]:{top:g(g(p).sub(a.switchLoadingIconSize)).div(2).equal(),fontSize:a.switchLoadingIconSize},[`&${o}-checked`]:{[`${o}-inner`]:{paddingInlineStart:f,paddingInlineEnd:C,[`${P}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${P}-unchecked`]:{marginInlineStart:`calc(100% - ${E} + ${U})`,marginInlineEnd:`calc(-100% + ${E} - ${U})`}},[`${o}-handle`]:{insetInlineStart:`calc(100% - ${ve(g(p).add(c).equal())})`}},[`&:not(${o}-disabled):active`]:{[`&:not(${o}-checked) ${P}`]:{[`${P}-unchecked`]:{marginInlineStart:g(a.marginXXS).div(2).equal(),marginInlineEnd:g(a.marginXXS).mul(-1).div(2).equal()}},[`&${o}-checked ${P}`]:{[`${P}-checked`]:{marginInlineStart:g(a.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:g(a.marginXXS).div(2).equal()}}}}}}},sa=a=>{const{componentCls:o,handleSize:h,calc:c}=a;return{[o]:{[`${o}-loading-icon${a.iconCls}`]:{position:"relative",top:c(c(h).sub(a.fontSize)).div(2).equal(),color:a.switchLoadingIconColor,verticalAlign:"top"},[`&${o}-checked ${o}-loading-icon`]:{color:a.switchColor}}}},la=a=>{const{componentCls:o,trackPadding:h,handleBg:c,handleShadow:x,handleSize:f,calc:C}=a,p=`${o}-handle`;return{[o]:{[p]:{position:"absolute",top:h,insetInlineStart:h,width:f,height:f,transition:`all ${a.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:c,borderRadius:C(f).div(2).equal(),boxShadow:x,transition:`all ${a.switchDuration} ease-in-out`,content:'""'}},[`&${o}-checked ${p}`]:{insetInlineStart:`calc(100% - ${ve(C(f).add(h).equal())})`},[`&:not(${o}-disabled):active`]:{[`${p}::before`]:{insetInlineEnd:a.switchHandleActiveInset,insetInlineStart:0},[`&${o}-checked ${p}::before`]:{insetInlineEnd:0,insetInlineStart:a.switchHandleActiveInset}}}}},ca=a=>{const{componentCls:o,trackHeight:h,trackPadding:c,innerMinMargin:x,innerMaxMargin:f,handleSize:C,calc:p}=a,g=`${o}-inner`,P=ve(p(C).add(p(c).mul(2)).equal()),E=ve(p(f).mul(2).equal());return{[o]:{[g]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:f,paddingInlineEnd:x,transition:`padding-inline-start ${a.switchDuration} ease-in-out, padding-inline-end ${a.switchDuration} ease-in-out`,[`${g}-checked, ${g}-unchecked`]:{display:"block",color:a.colorTextLightSolid,fontSize:a.fontSizeSM,transition:`margin-inline-start ${a.switchDuration} ease-in-out, margin-inline-end ${a.switchDuration} ease-in-out`,pointerEvents:"none",minHeight:h},[`${g}-checked`]:{marginInlineStart:`calc(-100% + ${P} - ${E})`,marginInlineEnd:`calc(100% - ${P} + ${E})`},[`${g}-unchecked`]:{marginTop:p(h).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${o}-checked ${g}`]:{paddingInlineStart:x,paddingInlineEnd:f,[`${g}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${g}-unchecked`]:{marginInlineStart:`calc(100% - ${P} + ${E})`,marginInlineEnd:`calc(-100% + ${P} - ${E})`}},[`&:not(${o}-disabled):active`]:{[`&:not(${o}-checked) ${g}`]:{[`${g}-unchecked`]:{marginInlineStart:p(c).mul(2).equal(),marginInlineEnd:p(c).mul(-1).mul(2).equal()}},[`&${o}-checked ${g}`]:{[`${g}-checked`]:{marginInlineStart:p(c).mul(-1).mul(2).equal(),marginInlineEnd:p(c).mul(2).equal()}}}}}},da=a=>{const{componentCls:o,trackHeight:h,trackMinWidth:c}=a;return{[o]:Object.assign(Object.assign(Object.assign(Object.assign({},Qn(a)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:c,height:h,lineHeight:ve(h),verticalAlign:"middle",background:a.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${a.motionDurationMid}`,userSelect:"none",[`&:hover:not(${o}-disabled)`]:{background:a.colorTextTertiary}}),Gn(a)),{[`&${o}-checked`]:{background:a.switchColor,[`&:hover:not(${o}-disabled)`]:{background:a.colorPrimaryHover}},[`&${o}-loading, &${o}-disabled`]:{cursor:"not-allowed",opacity:a.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${o}-rtl`]:{direction:"rtl"}})}},ma=a=>{const{fontSize:o,lineHeight:h,controlHeight:c,colorWhite:x}=a,f=o*h,C=c/2,p=2,g=f-p*2,P=C-p*2;return{trackHeight:f,trackHeightSM:C,trackMinWidth:g*2+p*4,trackMinWidthSM:P*2+p*2,trackPadding:p,handleBg:x,handleSize:g,handleSizeSM:P,handleShadow:`0 2px 4px 0 ${new Kn("#00230b").setA(.2).toRgbString()}`,innerMinMargin:g/2,innerMaxMargin:g+p+p*2,innerMinMarginSM:P/2,innerMaxMarginSM:P+p+p*2}},ha=Yn("Switch",a=>{const o=_n(a,{switchDuration:a.motionDurationMid,switchColor:a.colorPrimary,switchDisabledOpacity:a.opacityLoading,switchLoadingIconSize:a.calc(a.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${a.opacityLoading})`,switchHandleActiveInset:"-30%"});return[da(o),ca(o),la(o),sa(o),ra(o)]},ma);var ua=function(a,o){var h={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&o.indexOf(c)<0&&(h[c]=a[c]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,c=Object.getOwnPropertySymbols(a);x<c.length;x++)o.indexOf(c[x])<0&&Object.prototype.propertyIsEnumerable.call(a,c[x])&&(h[c[x]]=a[c[x]]);return h};const pa=s.forwardRef((a,o)=>{const{prefixCls:h,size:c,disabled:x,loading:f,className:C,rootClassName:p,style:g,checked:P,value:E,defaultChecked:U,defaultValue:he,onChange:Y}=a,se=ua(a,["prefixCls","size","disabled","loading","className","rootClassName","style","checked","value","defaultChecked","defaultValue","onChange"]),[xe,_]=Zt(!1,{value:P??E,defaultValue:U??he}),{getPrefixCls:K,direction:I,switch:D}=s.useContext(Xn),le=s.useContext(Jn),ue=(x??le)||f,F=K("switch",h),Z=s.createElement("div",{className:`${F}-handle`},f&&s.createElement(ea,{className:`${F}-loading-icon`})),[M,X,ee]=ha(F),te=Zn(c),J=en(D?.className,{[`${F}-small`]:te==="small",[`${F}-loading`]:f,[`${F}-rtl`]:I==="rtl"},C,p,X,ee),ce=Object.assign(Object.assign({},D?.style),g),we=(...ae)=>{_(ae[0]),Y?.apply(void 0,ae)};return M(s.createElement(Wn,{component:"Switch"},s.createElement(tn,Object.assign({},se,{checked:xe,onChange:we,prefixCls:F,className:J,style:ce,disabled:ue,ref:o,loadingIcon:Z}))))}),Ct=pa;Ct.__ANT_SWITCH=!0;function Nt(){return Nt=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var h=arguments[o];for(var c in h)Object.prototype.hasOwnProperty.call(h,c)&&(a[c]=h[c])}return a},Nt.apply(this,arguments)}const ga=(a,o)=>s.createElement(aa,Nt({},a,{ref:o,icon:ta})),fa=s.forwardRef(ga);function ya({form:a,webhookUrl:o,EXECUTIVES:h=[],setBrand:c,setMode:x,setVehicleType:f,setFittings:C,setDocsReq:p,setEmiSet:g,setDownPayment:P,setOnRoadPrice:E,setCompany:U,setModel:he,setVariant:Y,setExtraVehicles:se,setFollowUpEnabled:xe,setFollowUpAt:_,setFollowUpNotes:K,onPayloadApplied:I,autoApply:D,buttonText:le="Fetch Details",buttonProps:ue={}}){const[F,Z]=s.useState(!1),[M,X]=s.useState(""),[ee,te]=s.useState(!1),[J,ce]=s.useState([]),[we,ae]=s.useState(""),Ie=s.useRef(""),pe=v=>String(v||"").replace(/\D/g,"").replace(/^0+/,"").slice(-10),Se=()=>{const v=pe(M)||String(M||"").trim(),u=v?`The mobile number "${v}" is not in our quotation records.`:"No matching record found in our quotation records.";ae(u),jt.warning({centered:!0,title:"No quotation found",content:u,okText:"Got it"})},Me=async()=>{if(!o)throw new Error("Quotation search webhook is not configured");const v=await nt({webhookUrl:o,method:"GET",payload:{action:"search",mode:"mobile",query:String(M||"")}}),u=v?.data||v;return{mode:"webhook",rows:Array.isArray(u?.rows)?u.rows:[]}},de=v=>v&&v.formValues?v:{version:0,brand:"SHANTHA",mode:"cash",vehicleType:"scooter",fittings:[],docsReq:[],emiSet:"12",downPayment:0,onRoadPrice:0,company:"",model:"",variant:"",branch:"",followUp:{enabled:!1,at:null,notes:"",status:"pending"},formValues:{serialNo:"",name:"",mobile:"",address:"",company:"",bikeModel:"",variant:"",onRoadPrice:0,executive:h[0]?.name||"",remarks:"",branch:""},extraVehicles:[]},je=v=>{const u=v&&typeof v=="object"?v.payload:null,m=v&&typeof v=="object"?v.values||{}:{},A=fe=>Number(String(fe||0).replace(/[,â‚¹\s]/g,""))||0,H=A(m.downPayment||m.DownPayment||m["Down Payment"]||m.DP||m.dp||m.Down_Payment);if(u&&typeof u=="object"){const fe=m.branch||m.Branch||"";return fe&&(u.branch=u.branch||fe,u.formValues={...u.formValues||{},branch:u.formValues&&u.formValues.branch||fe}),!u.downPayment&&H>0&&(u.downPayment=H),u}return{version:0,brand:"SHANTHA",mode:"cash",vehicleType:"scooter",fittings:[],docsReq:[],emiSet:"12",downPayment:H||0,onRoadPrice:A(m.onRoadPrice||m.OnRoadPrice||m["On-Road Price"]),company:m.company||m.Company||"",model:m.bikeModel||m.Model||"",variant:m.variant||m.Variant||"",branch:m.branch||m.Branch||"",formValues:{serialNo:m.serialNo||m.Quotation_ID||m.Quotation_ID||m["Quotation No"]||"",name:m.name||m.Customer_Name||m.Customer_Name||"",mobile:m.mobile||m.Mobile||m.Mobile||"",address:m.address||m.Address||"",company:m.company||m.Company||"",bikeModel:m.bikeModel||m.Model||"",variant:m.variant||m.Variant||"",onRoadPrice:A(m.onRoadPrice||m.OnRoadPrice||m["On-Road Price"]),executive:m.executive||m.Executive_Name||h[0]?.name||"",remarks:m.remarks||m.Remarks||"",branch:m.branch||m.Branch||"",downPayment:H||0},extraVehicles:[]}},ge=v=>{const u=de(v);try{c?.(u.brand||"SHANTHA"),x?.(u.mode||"cash"),f?.(u.vehicleType||"scooter"),C?.(Array.isArray(u.fittings)?u.fittings:[]),p?.(Array.isArray(u.docsReq)?u.docsReq:[]),g?.(u.emiSet||"12"),P?.(Number(u.downPayment||0)),E?.(Number(u.onRoadPrice||0)),U?.(u.company||""),he?.(u.model||""),Y?.(u.variant||""),se?.(Array.isArray(u.extraVehicles)?u.extraVehicles:[]);const m=u.followUp||{};xe?.(!!m.enabled),_?.(m.at?re(m.at):null),K?.(m.notes||"");const A=u.formValues||{};a.setFieldsValue({serialNo:A.serialNo||"",name:A.name||"",mobile:pe(A.mobile||""),address:A.address||"",company:A.company||u.company||"",bikeModel:A.bikeModel||u.model||"",variant:A.variant||u.variant||"",onRoadPrice:Number(A.onRoadPrice??u.onRoadPrice??0),downPayment:Number(A.downPayment??u.downPayment??0),executive:A.executive||h[0]?.name||"",remarks:A.remarks||"",branch:A.branch||u.branch||""}),E?.(Number(A.onRoadPrice??u.onRoadPrice??0)),I?.({serialNo:A.serialNo||u.serialNo||"",savedAt:u.savedAt||"",createdAt:u.createdAt||A.createdAt||""}),Ne.success("Quotation loaded."),Z(!1),ce([]),X("")}catch(m){console.warn("applyToForm error:",m),Ne.error("Could not apply fetched details.")}};s.useEffect(()=>{if(!D?.payload)return;const v=String(D?.token||"")+":"+String(D?.payload?.formValues?.serialNo||D?.payload?.serialNo||D?.payload?.formValues?.mobile||"");Ie.current!==v&&(Ie.current=v,ge(D.payload))},[D]);const Pe=async()=>{const v=String(M||"").trim(),u=pe(v);if(!u||u.length!==10){Ne.warning("Enter a valid 10-digit mobile number.");return}X(u),ae(""),te(!0);try{const m=await Me();if(!m)throw new Error("No result");const A=(m.rows||[]).map(H=>({payload:je(H)}));if(!A.length){Se(),ce([]);return}if(A.length===1){ge(A[0].payload);return}ce(A.slice(0,10)),Ne.info(`Found ${A.length} matches. Pick one.`)}catch(m){console.warn("FetchQuot search error:",m),Ne.error("Could not fetch quotations. Check the Apps Script/Webhook.")}finally{te(!1)}},oe=v=>{const u=v.payload||{},m=u.formValues||{},A=m.serialNo||"â€”",H=m.name||"â€”",fe=pe(m.mobile)||"â€”",ke=[m.company||u.company,m.bikeModel||u.model,m.variant||u.variant].filter(Boolean).join(" ")||"â€”",We=Number(m.onRoadPrice??u.onRoadPrice??0),qe=m.branch||u.branch||"â€”";return e.jsx(tt.Item,{actions:[e.jsx(ne,{type:"link",onClick:()=>ge(v.payload),children:"Use"})],children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",width:"100%"},children:[e.jsxs("div",{children:[e.jsx("b",{children:"Quotation:"})," ",A," Â  ",e.jsx("b",{children:"Name:"})," ",H]}),e.jsxs("div",{children:[e.jsx("b",{children:"Mobile:"})," ",fe," Â  ",e.jsx("b",{children:"Vehicle:"})," ",ke]}),e.jsxs("div",{style:{gridColumn:"1 / span 2",color:"#999"},children:[e.jsx("b",{children:"Branch:"})," ",qe," Â  ",e.jsx("b",{children:"Price:"})," â‚¹",We.toLocaleString("en-IN")]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(ne,{...ue,onClick:()=>{ae(""),Z(!0)},children:le}),e.jsx(jt,{title:"Fetch Quotation",open:F,onCancel:()=>{Z(!1),ce([]),ae("")},footer:[e.jsx(ne,{onClick:()=>{Z(!1),ce([]),ae("")},children:"Close"},"close"),e.jsx(ne,{type:"primary",loading:ee,onClick:Pe,children:"Search"},"search")],children:e.jsxs(qn,{direction:"vertical",style:{width:"100%"},children:[e.jsx(G,{placeholder:"Enter Mobile (10-digit or last few digits)",value:M,inputMode:"numeric",onChange:v=>X(pe(v.target.value)),onPressEnter:Pe,allowClear:!0}),we&&e.jsx(Fn,{type:"warning",showIcon:!0,message:we}),ee&&e.jsx(Jt,{}),J.length>1&&e.jsx(tt,{size:"small",bordered:!0,dataSource:J,renderItem:oe})]})})]})}const xa="https://script.google.com/macros/s/AKfycby0YV2E2Ryb4YehYRzBistMW4sWN3XDcqaEfgkfRvEjmaKNVKq2Ubi3ul50AbxO6TVPJA/exec",He=xa,ba="https://docs.google.com/spreadsheets/d/e/2PACX-1vQYGuNPY_2ivfS7MTX4bWiu1DWdF2mrHSCnmTznZVEHxNmsrgcGWjVZN4UDUTOzQQdXTnbeM-ylCJbB/pub?gid=408799621&single=true&output=csv",Je={company:["Company","Company Name"],model:["Model","Model Name"],variant:["Variant"],price:["On-Road Price","On Road Price","Price","OnRoadPrice"]},va=a=>{const o=[];let h=[],c="",x=!1;for(let f=0;f<a.length;f++){const C=a[f],p=a[f+1];if(C==='"'&&!x){x=!0;continue}if(C==='"'&&x){if(p==='"'){c+='"',f++;continue}x=!1;continue}if(C===","&&!x){h.push(c),c="";continue}if((C===`
`||C==="\r")&&!x){(c!==""||h.length)&&(h.push(c),o.push(h),h=[],c=""),C==="\r"&&p===`
`&&f++;continue}c+=C}return(c!==""||h.length)&&(h.push(c),o.push(h)),o},wa=async a=>{const o=await fetch(a,{cache:"no-store"});if(!o.ok)throw new Error("Sheet fetch failed");const h=await o.text();if(h.trim().startsWith("<"))throw new Error("Expected CSV, got HTML");const c=va(h);if(!c.length)return[];const x=c[0].map(f=>(f||"").trim());return c.slice(1).map(f=>{const C={};return x.forEach((p,g)=>C[p]=f[g]??""),C})},Ze=(a,o)=>String(o.map(h=>a[h]??"").find(h=>h!=="")||"").trim(),Sa=(a={})=>({company:Ze(a,Je.company),model:Ze(a,Je.model),variant:Ze(a,Je.variant),onRoadPrice:Number(String(Ze(a,Je.price)||"0").replace(/[",\sâ‚¹]/g,""))||0}),ja=8e3,Ca=9,Na=11,bt=[{name:"Rukmini",phone:"9901678562"},{name:"Meghana",phone:"9741609799"},{name:"Shubha",phone:"8971585057"},{name:"Rani",phone:"9108970455"},{name:"Likhitha",phone:"9535190015"},{name:"Vanitha",phone:"9380729861"},{name:"Prakash",phone:"9740176476"},{name:"Swathi",phone:"6363116317"},{name:"Kumar",phone:"7975807667"},{name:"Sujay",phone:"7022878048"},{name:"Kavi",phone:"9108970455"},{name:"Narasimha",phone:"9900887666"},{name:"Kavya",phone:"8073165374"}];async function Pa(a,o,h){try{const c=await Hn(a,o,h);if(c?.success&&c?.serial)return String(c.serial)}catch(c){console.error("Failed to reserve quotation serial via API",c)}return re().format("YYMMDDHHmmss")}const ka=["All Round Guard","Side Stand","Ladies Foot Rest","Grip Cover","Seat Cover","Floor Mat","ISI Helmet"],Aa=["Crash Guard","Engine Guard","Tank Cover","Ladies Handle","Gripper","Seat Cover","ISI Helmet"],vt=["Aadhar Card","Pan Card","Bank Passbook","ATM Card","Local Address Proof"],Ia="Meghana",Ma="Byadarahalli",$a=[{required:!0,message:"Mobile number is required"},{pattern:/^[6-9]\d{9}$/,message:"Enter a valid 10-digit Indian mobile number"}],ie=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(Math.max(0,Math.round(a||0))),Ra=async a=>await nt({webhookUrl:He,method:"POST",payload:{action:"save",data:a}}),Ea=()=>({company:"",model:"",variant:"",onRoadPrice:0,downPayment:0,emiSet:"12"}),et=["branch","executive","name","mobile","company","bikeModel","variant","onRoadPrice"],wt=(a,o)=>{const h=o?.errorFields?.[0]?.name;h?.length&&a.scrollToField(h,{behavior:"smooth",block:"center"})},St=async a=>{const o=await a.validateFields(et);if(!(Number(o?.onRoadPrice||0)>0))throw new Error("On-Road Price must be greater than 0.");if(!/^[6-9]\d{9}$/.test(String(o?.mobile||"")))throw new Error("Enter a valid 10-digit Indian mobile number.");return o};function co(){const[a]=j.useForm(),[o,h]=s.useState("SHANTHA"),[c,x]=s.useState([]),[f,C]=s.useState(""),[p,g]=s.useState(""),[P,E]=s.useState(""),[U,he]=s.useState(0),[Y,se]=s.useState(0),xe=(t=6e3)=>{const n=Date.now()+t;se(n),setTimeout(()=>se(0),t+50)},[_,K]=s.useState(0),[I,D]=s.useState(!1),[le,ue]=s.useState(!1),[F,Z]=s.useState("loan"),[M,X]=s.useState("12"),ee=s.useMemo(()=>M==="12"?[12,18,24,36]:[24,30,36,48],[M]),[te,J]=s.useState(0),[ce,we]=s.useState(!1),[ae,Ie]=s.useState(!1),pe=s.useRef(!1),[Se,Me]=s.useState("scooter"),[de,je]=s.useState(["Side Stand","Floor Mat","ISI Helmet","Grip Cover"]),[ge,Pe]=s.useState(vt),[oe,v]=s.useState([]),[u,m]=s.useState(),[,A]=s.useState(""),[H,fe]=s.useState(""),[ke,We]=s.useState([]),[qe,nn]=s.useState(!1),[$e,an]=s.useState(""),[Pt,at]=s.useState(""),[on,kt]=s.useState(""),[Le,rn]=s.useState([]),[Re,ot]=s.useState(!0),[ze,it]=s.useState(()=>re().add(2,"day").hour(10).minute(0).second(0).millisecond(0)),[At,rt]=s.useState(""),[sn,Ue]=s.useState(!1),[ln,It]=s.useState(!1),[st,Ae]=s.useState([]),[cn,Ee]=s.useState(!1),[dn,mn]=s.useState(null),[Ye,lt]=s.useState({serialNo:"",savedAt:"",createdAt:""}),De="Quotation:outbox",ct=(t,n)=>{try{const r=localStorage.getItem(t);return r?JSON.parse(r):n}catch{return n}},Mt=(t,n)=>{try{localStorage.setItem(t,JSON.stringify(n))}catch{}},hn=t=>{const n=ct(De,[]),r={id:Date.now()+":"+Math.random().toString(36).slice(2),job:t};return n.push(r),Mt(De,n),r.id},$t=t=>{const n=ct(De,[]);Mt(De,n.filter(r=>r.id!==t))},Rt=async()=>{try{const t=ct(De,[]);if(!Array.isArray(t)||!t.length)return;for(const n of t){const r=n.job||{};try{if(r.type==="quot"&&He){const l=await nt({webhookUrl:He,method:"POST",payload:{action:"save",data:r.data}});if(!((l?.data||l)?.success!==!1))throw new Error("Webhook save failed");$t(n.id)}}catch{}}}catch{}};s.useEffect(()=>{setTimeout(()=>{Rt()},0)},[]),s.useEffect(()=>{const t=()=>Rt();return window.addEventListener("online",t),()=>window.removeEventListener("online",t)},[]);const _e=j.useWatch("executive",a)||u||"",dt=s.useMemo(()=>{const t=i=>String(i||"").trim().toLowerCase(),n=t(_e);if(!n)return"";const r=i=>(i||[]).find(w=>t(w?.name)===n),l=r(Le)||r(bt);if(l?.phone)return String(l.phone);try{const i=JSON.parse(localStorage.getItem("user")||"null"),w=t(i?.formDefaults?.staffName||i?.name||"");if(w&&w===n)return String(i?.phone||"")}catch{}return""},[_e,Le]),Fe=j.useWatch("branch",a),Et=j.useWatch("executive",a);s.useEffect(()=>{const t={};!Fe&&H&&(t.branch=H),!Et&&$e&&(t.executive=$e),Object.keys(t).length&&a.setFieldsValue(t)},[Fe,Et,H,$e]);const[me,un]=Ne.useMessage(),Dt=async(t="Saved successfully")=>{me.destroy("save"),me.open({key:"save",type:"success",content:t,duration:1.5}),await new Promise(n=>setTimeout(n,300))},Ft=s.useRef(null),pn=s.useMemo(()=>re().format("DD-MM-YYYY HH:mm"),[]),gn=t=>{const n=t?.startsWith("http")?t:`${window.location.origin}${t||""}`,r=Date.now();return n.includes("?")?`${n}&v=${r}`:`${n}?v=${r}`};s.useEffect(()=>{(async()=>{try{const t=i=>String(i||"").trim().toUpperCase(),n=()=>{try{const i=localStorage.getItem("user");return i?JSON.parse(i):null}catch{return null}},r=i=>i?typeof i=="string"?i:typeof i=="object"&&(i._id||i.id||i.$oid)||null:null;let l=n();if(!l||!l.formDefaults){const i=await En().catch(()=>null);if(i?.success&&i.data){l=i.data;try{localStorage.setItem("user",JSON.stringify(l))}catch{}}}if(l){const i=l?.formDefaults?.staffName||l?.name||void 0,w=i?t(i):void 0,d=l?.role?String(l.role).toLowerCase():void 0,O=!!l?.canSwitchBranch||["owner","admin"].includes(String(d||"").toLowerCase());nn(O);try{const W=String(d||"").toLowerCase();if(["owner","admin"].includes(W)){const V=await Tn({status:"active",limit:500});if(V?.success&&Array.isArray(V?.data?.items)){const B=V.data.items.filter(b=>String(b?.status||"").toLowerCase()==="active").map(b=>({id:String(b.id||b._id||""),name:t(b.name),code:b.code?String(b.code).toUpperCase():""}));We(B)}try{const Q=await Vn({role:"staff",status:"active",limit:1e5});if(Q?.success&&Array.isArray(Q?.data?.items)){const B=Q.data.items.map(b=>({name:b.name,phone:b.phone||""}));rn(B)}}catch{}}else{const V=[],Q=S=>{if(!S)return;const L=typeof S=="string"?"":String(S?.status||"").toLowerCase();if(L&&L!=="active")return;const Ce=S&&(S._id||S.id||S.$oid||S)||"",ft=typeof S=="string"?"":S?.name||"",Ge=t(ft),Oe=typeof S=="string"?"":S?.code||"";!Ce||!Ge||V.push({id:String(Ce),name:String(Ge),code:Oe?String(Oe).toUpperCase():""})};l?.primaryBranch&&Q(l.primaryBranch),Array.isArray(l?.branches)&&l.branches.forEach(Q);const B=new Set,b=[];V.forEach(S=>{B.has(S.id)||(B.add(S.id),b.push(S))}),We(b)}}catch{}let $=l?.formDefaults?.branchName?t(l.formDefaults.branchName):void 0;const k=l?.formDefaults?.branchCode&&String(l.formDefaults.branchCode).toUpperCase()||"";if(k){at(k);try{a.setFieldsValue({branchCode:k})}catch{}}const y=l?.formDefaults&&(l.formDefaults.branchId?._id||l.formDefaults.branchId||null)||l?.primaryBranch&&(l.primaryBranch?._id||l.primaryBranch||null)||Array.isArray(l?.branches)&&l.branches.length&&(l.branches[0]?._id||l.branches[0])||null;if(y)try{const W=await On(String(y)).catch(()=>null);if(W?.success&&W?.data&&($||($=W.data.name),W?.data?.code&&!Pt)){const V=String(W.data.code).toUpperCase();at(V),kt(String(W.data.id||y));try{a.setFieldsValue({branchCode:V})}catch{}}}catch{}w&&m(w),d&&A(d);const q={};w&&(q.executive=w),$&&(q.branch=$),Object.keys(q).length&&a.setFieldsValue(q),$&&fe($),w&&an(w)}}catch{}try{const n=(await wa(ba)).map(Sa).filter(r=>r.company&&r.model&&r.variant);if(!n.length){me.warning("Sheet loaded but no valid rows. Switching to manual entry."),D(!0),ue(!1);return}x(n),ue(!0),D(!1)}catch{me.warning("Could not load vehicle sheet. Switched to manual entry."),D(!0),ue(!1)}})()},[me]);const fn=Dn.useMemo(()=>{const t=new Map;return(ke||[]).forEach(n=>t.set(String(n.name||"").toLowerCase(),n)),t},[ke]),yn=t=>{try{const n=String(t||"").toLowerCase(),r=fn.get(n);if(r){kt(r.id),r.code&&at(String(r.code).toUpperCase());try{a.setFieldsValue({branch:r.name,branchCode:r.code?String(r.code).toUpperCase():void 0})}catch{}}}catch{}},Te=s.useMemo(()=>Fe||H||"",[Fe,H]),mt=s.useMemo(()=>!!String(Te||"").trim(),[Te]),Qe=cn?st.length:null,xn=t=>{const n=t?.values||t||{},r=t?.payload||n.Payload||n.payload||n.PAYLOAD||t?.Payload||t?.PAYLOAD||"";let l={};try{l=typeof r=="object"?r:JSON.parse(String(r||"{}"))}catch{l={}}const i=l.formValues||l.values||{},w=l.followUp||l.followup||{},d=String(w.status||n.Status||n.status||"pending").toLowerCase(),O=(y,q)=>{for(const W of q){const V=y?.[W];if(V!=null&&String(V).trim()!=="")return String(V).trim()}return""},$=w.at||w.followUpAt||n["Follow-up At"]||n["Follow Up At"]||n["Followup At"]||n["Follow-up Date"]||n["Follow Up Date"]||n["Followup Date"]||"",k=(()=>{if(!$)return"";const y=re($,["DD-MM-YYYY HH:mm","DD/MM/YYYY HH:mm","DD-MM-YYYY","DD/MM/YYYY",re.ISO_8601],!0);return y.isValid()?y.format("DD-MM-YYYY HH:mm"):String($)})();return{serial:i.serialNo||O(n,["Quotation No.","Quotation No","Quotation_ID","Quotation ID","Serial"])||"-",name:i.name||O(n,["Customer_Name","Customer Name","Name"])||"-",mobile:String(i.mobile||O(n,["Mobile","Mobile Number","Phone"])||"").replace(/\D/g,"").slice(-10),vehicle:[i.company||l.company||n.Company,i.bikeModel||l.model||n.Model,i.variant||l.variant||n.Variant].filter(Boolean).join(" ")||"-",branch:i.branch||l.branch||n.Branch||n["Branch Name"]||"-",followUpAt:k,followUpNotes:w.notes||n["Follow-up Notes"]||n["Follow Up Notes"]||n["Followup Notes"]||"",status:d,payload:l}},ht=async({silent:t=!1}={})=>{if(!mt){Ae([]),Ee(!1);return}t||It(!0);try{const l=await nt({webhookUrl:He,method:"GET",payload:{...{action:"list",page:1,pageSize:500},...Te?{branch:Te}:{}}}),i=l?.data||l,O=(Array.isArray(i?.data)?i.data:Array.isArray(i?.rows)?i.rows:[]).map(xn).filter($=>$&&$.serial!=="-").filter($=>!$.status||$.status==="pending");Ae(O),Ee(!0)}catch{Ae([]),Ee(!0)}finally{t||It(!1)}};s.useEffect(()=>{if(!mt){Ae([]),Ee(!1);return}Ae([]),Ee(!1),ht({silent:!0})},[mt,Te]),s.useEffect(()=>{o==="NH"&&(a.setFieldsValue({executive:Ia}),a.setFieldsValue({branch:Ma}))},[o,a]),s.useEffect(()=>{je(Se==="scooter"?["Side Stand","Floor Mat","ISI Helmet","Grip Cover"]:["Tank Cover","Gripper","Seat Cover","ISI Helmet"])},[Se]);const Tt=s.useMemo(()=>Be(c.map(t=>t.company)),[c]),bn=s.useMemo(()=>{const t=R(f),n=t?c.filter(r=>R(r.company)===t):c;return Be(n.map(r=>r.model))},[c,f]),vn=s.useMemo(()=>{const t=R(f),n=R(p),r=c.filter(l=>!(t&&R(l.company)!==t||n&&R(l.model)!==n));return Be(r.map(l=>l.variant))},[c,f,p]),wn=t=>{if(E(t),!I){const n=R(f),r=R(p),l=R(t),w=c.find(d=>R(d.company)===n&&R(d.model)===r&&R(d.variant)===l)?.onRoadPrice||0;a.setFieldsValue({onRoadPrice:w}),K(w),J(0)}},Sn=(t,n)=>(t>0?(n||0)/t:0)>=.3?Ca:Na,Ve=(t,n,r)=>{const i=Math.max(Number(t||0)-Number(n||0),0)+ja,w=r/12,d=Sn(t,n),O=i*(d/100)*w,$=i+O;return r>0?$/r:0},jn=t=>t==="12"?[12,18,24,36]:[24,30,36,48],Vt=async()=>{if(pe.current)return null;pe.current=!0,we(!0);try{if(Date.now()-U<6e3)return null;const n=await Nn();return he(Date.now()),n}finally{pe.current=!1,we(!1)}},ut=async()=>{try{if(Date.now()<Y)return;xe(6e3),Ie(!0),await new Promise(k=>setTimeout(k,0)),await St(a),await Vt(),await Dt("Saved (background sync). Preparing printâ€¦");const t=Ft.current;if(!t){window.print();return}await new Promise(k=>setTimeout(k,0));const n=t.cloneNode(!0);n.querySelectorAll("canvas").forEach(k=>{try{const y=document.createElement("img");y.alt=k.getAttribute("aria-label")||"canvas",y.src=k.toDataURL("image/png"),y.style.maxWidth="100%",y.style.height="auto",k.parentNode&&k.parentNode.replaceChild(y,k)}catch{}}),n.querySelectorAll("img").forEach(k=>{const y=k.getAttribute("src");y&&!y.startsWith("data:")&&k.setAttribute("src",gn(y))});const r=`
        @page { size: A4 portrait; margin: 0; }
        html, body {
          margin: 0 !important; padding: 0 !important; background: #fff !important;
          -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important;
          font-family: Arial, sans-serif;
        }
        * { box-sizing: border-box; }
        .print-wrap { margin: 0 auto; }
        .page { width: 210mm; min-height: 297mm; padding: 12mm; background: #fff !important; }
        .sheet { width: 100%; font: 12pt/1.32 Arial, sans-serif; color: #111; page-break-inside: avoid; }
        .row2 { display: grid; grid-template-columns: 0.8fr 1.4fr; gap: 8px 16px; }
        .row3 { display: grid; grid-template-columns: 0.5fr 0.8fr 1fr; gap: 10px 16px; }
        .box { border: 2px solid #000; border-radius: 6px; padding: 8px 10px; background: #fff; }
        .plist { margin: 0; padding-left: 18px; } .plist li { margin: 0 0 2px; }
        .title-knhonda { font-size: 30pt; font-weight: 900; letter-spacing: .2px; }
        .title-kn { font-size: 32pt; font-weight: 500; letter-spacing: .2px; }
        .title-en { font-size: 18pt; font-weight: 600; margin-top: 2px; }
        .big-price { font-size: 16pt; font-weight: 900; }
        .addr-line { font-size: 11pt; } .addr-linehonda { font-size: 12pt; }
        .hdr-line { display:flex; align-items:center; border-bottom:2px solid #000; padding-bottom:6px; margin-bottom:8px; }
        .hdr-title { flex: 1; display: flex; justify-content: center; }
        .quo-box { font-size: 17pt; border: 2px solid #000; padding: 4px 10px; font-weight: 800; display: inline-block; }
        .hdr-right { text-align: right; font-weight: 600; }
        .emibox { border: 2px solid #000; border-radius: 8px; padding: 6px 10px; text-align: center; }
        .section-title { font-size: 14pt; font-weight: 900; margin-bottom: 4px; }
        img { max-width: 100%; height: auto; background: transparent; }
        @media print {
          * { transform: none !important; }
          .fixed, .sticky, [style*="position: sticky"], [style*="position: fixed"] { position: static !important; }
          .no-print { display: none !important; }
        }
      `;if(/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)){const k=window.open("","_blank");if(!k){me.error("Please allow pop-ups to print.");return}const y=k.document;y.open(),y.write(`
          <!doctype html>
          <html>
          <head>
            <meta charset="utf-8"/>
            <meta name="viewport" content="width=device-width, initial-scale=1"/>
            <base href="${location.origin}${location.pathname}">
            <title>Quotation</title>
            <style>${r}</style>
          </head>
          <body>
            <div class="print-wrap"></div>
          </body>
          </html>
        `),y.close();const q=y.querySelector(".print-wrap"),W=y.importNode(n,!0);q.appendChild(W),await(async()=>{const Q=Array.from(y.images||[]);if(await Promise.all(Q.map(B=>B.complete&&B.naturalWidth?Promise.resolve():new Promise(b=>{B.onload=B.onerror=()=>b()}))),y.fonts&&y.fonts.ready)try{await y.fonts.ready}catch{}await new Promise(B=>setTimeout(B,200))})();try{k.focus()}catch{}k.print(),setTimeout(pt,1e3);return}const i=document.createElement("iframe");i.style.position="fixed",i.style.right="0",i.style.bottom="0",i.style.width="0",i.style.height="0",i.style.border="0",i.setAttribute("aria-hidden","true"),document.body.appendChild(i);const w=i.contentWindow,d=w.document;d.open(),d.write(`
        <!doctype html>
        <html>
        <head>
          <meta charset="utf-8"/>
          <meta name="viewport" content="width=device-width, initial-scale=1"/>
          <base href="${location.origin}${location.pathname}">
          <title>Quotation</title>
          <style>${r}</style>
        </head>
        <body>
          <div class="print-wrap"></div>
        </body>
        </html>
      `),d.close(),d.querySelector(".print-wrap").appendChild(d.importNode(n,!0));const $=async()=>{const k=Array.from(d.images||[]);if(await Promise.all(k.map(y=>y.complete&&y.naturalWidth?Promise.resolve():new Promise(q=>{y.onload=y.onerror=()=>q()}))),d.fonts&&d.fonts.ready)try{await d.fonts.ready}catch{}await new Promise(y=>setTimeout(y,200))};try{await $();try{w.focus()}catch{}try{w.print()}catch{window.print()}setTimeout(pt,1e3)}finally{setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},800)}}catch(t){me.warning(t?.message||"Fix the highlighted fields before printing.");try{await a.validateFields(et)}catch(n){wt(a,n)}return}finally{Ie(!1)}},Ot=s.useRef(ut);s.useEffect(()=>{Ot.current=ut}),s.useEffect(()=>{const t=n=>{(n.ctrlKey||n.metaKey)&&(n.key==="p"||n.key==="P")&&(n.preventDefault(),Ot.current?.())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]);const Cn=(t,n)=>{if(t&&typeof t=="object"){const r={};Object.keys(t).forEach(l=>{const i=t[l];r[l]=typeof i=="string"?i.toUpperCase():i}),Object.keys(r).length&&a.setFieldsValue(r)}if(typeof n?.onRoadPrice<"u"&&(K(Number(n.onRoadPrice||0)),te>Number(n.onRoadPrice||0)&&J(Number(n.onRoadPrice||0))),typeof n?.downPayment<"u"){const r=Number(n.downPayment||0);J(r)}},pt=()=>{a.resetFields(),h("SHANTHA"),C(""),g(""),E(""),K(0),D(!le),Z("loan"),X("12"),J(0),Me("scooter"),je(["Side Stand","Floor Mat","ISI Helmet","Grip Cover"]),Pe(vt),v([]),ot(!0),it(re().add(2,"day").hour(10).minute(0).second(0).millisecond(0)),rt(""),lt({serialNo:"",savedAt:"",createdAt:""});const t={};H&&(t.branch=H),$e&&(t.executive=$e),Object.keys(t).length&&a.setFieldsValue(t),me.success("Form has been reset for a new quotation.")},Bt=j.useWatch("branch",a),Ht=j.useWatch("executive",a),Wt=j.useWatch("name",a),qt=j.useWatch("mobile",a),Lt=j.useWatch("company",a),zt=j.useWatch("bikeModel",a),Ut=j.useWatch("variant",a),Yt=j.useWatch("onRoadPrice",a),gt=s.useMemo(()=>{const t=/^[6-9]\d{9}$/.test(String(qt||"")),n=Number(Yt||0)>0;return!!(Bt&&Ht&&Wt&&t&&Lt&&zt&&Ut&&n)},[Bt,Ht,Wt,qt,Lt,zt,Ut,Yt]),Nn=async()=>{try{await St(a)}catch(b){Ne.error(b?.message||"Please complete all required fields.");try{await a.validateFields(et)}catch(S){wt(a,S)}throw b}const t=await a.validateFields(["name","mobile","address","company","bikeModel","variant","onRoadPrice","executive","remarks","branch",...F==="loan"?["downPayment"]:[]]);for(let b=0;b<oe.length;b++){const S=oe[b];if(!S.company||!S.model||!S.variant||!S.onRoadPrice)throw new Error(`Please complete Vehicle ${b+2} before saving.`);if(F==="loan"){const L=Number(S.downPayment||0);if(!(L>0))throw new Error(`Enter down payment for Vehicle ${b+2} (loan)`);if(L>Number(S.onRoadPrice||0))throw new Error(`Down payment for Vehicle ${b+2} cannot exceed its on-road price`)}}let n=String(a.getFieldValue("serialNo")||"").trim();if(!n||!/^Q-[A-Z]+-[A-Z0-9]{6}$/.test(n))try{n=await Pa(t.mobile,Pt||(a.getFieldValue("branchCode")||"").toUpperCase(),on),a.setFieldsValue({serialNo:n})}catch{n=re().format("YYMMDDHHmmss"),a.setFieldsValue({serialNo:n})}t.serialNo=n;const l=(b,S,L)=>[b,S,L].filter(Boolean).join(" "),i=[];{const b=t.company||"",S=t.bikeModel||"",L=t.variant||"",Ce=l(b,S,L);Ce&&i.push(`V1: ${Ce}`)}oe.forEach((b,S)=>{const L=l(b.company||"",b.model||"",b.variant||"");L&&i.push(`V${S+2}: ${L}`)});const w=Array.isArray(de)&&de.length?`Fittings: ${Array.from(new Set(de.filter(Boolean))).join(", ")}`:"",d=[String(t.remarks||"").trim(),...i,w].filter(Boolean).join(" | "),O=new Date().toISOString(),$=String(Ye?.serialNo||"").trim(),k=String(t.serialNo||"").trim(),y=$&&k&&$===k,q=y?String(Ye?.savedAt||"").trim():"",W=y?String(Ye?.createdAt||Ye?.savedAt||"").trim():"",V={version:1,savedAt:q||O,createdAt:W||q||O,updatedAt:O,brand:o,mode:F,vehicleType:Se,fittings:de,docsReq:ge,emiSet:M,downPayment:te,onRoadPrice:_,company:f,model:p,variant:P,followUp:{enabled:!!Re,at:Re&&ze&&re(ze).isValid()?re(ze).toISOString():null,notes:String(At||""),updatedAt:O,assignedTo:t.executive||u||"",branch:t.branch||"",customer:{name:t.name||"",mobile:t.mobile||""},status:"pending"},formValues:{serialNo:t.serialNo,name:t.name,mobile:t.mobile,address:t.address,company:t.company,bikeModel:t.bikeModel,variant:t.variant,onRoadPrice:t.onRoadPrice,executive:t.executive,remarks:d,branch:t.branch||""},extraVehicles:oe};lt({serialNo:t.serialNo,savedAt:V.savedAt,createdAt:V.createdAt});const Q={serialNo:t.serialNo,formValues:{name:t.name,mobile:t.mobile,address:t.address,company:t.company,bikeModel:t.bikeModel,variant:t.variant,onRoadPrice:t.onRoadPrice,executive:t.executive,remarks:d,branch:t.branch||""},payload:V},B=hn({type:"quot",data:Q});return setTimeout(async()=>{try{const b=await Ra(Q);(b?.data||b)?.success!==!1&&$t(B)}catch{}},0),{values:t,queued:!0}},Pn=t=>{const n=String(t||"").replace(/\D/g,"").replace(/^0+/,"");return n.length===10?`91${n}`:n.startsWith("91")&&n.length===12?n:""},kn=async()=>{try{if(Date.now()<Y)return;xe(6e3),await St(a),await Vt(),await Dt("Saved (background sync). Opening WhatsAppâ€¦");const t=a.getFieldsValue(!0),n=Pn(t.mobile);if(!n){me.error("Enter a valid 10-digit Indian mobile to open WhatsApp.");return}const r=o==="SHANTHA"?"Shantha Motors":"NH Motors",l=(a.getFieldValue("name")||"-").trim(),i=(f||a.getFieldValue("company")||"-").trim(),w=(p||a.getFieldValue("bikeModel")||"-").trim(),d=(P||a.getFieldValue("variant")||"-").trim(),O=a.getFieldValue("onRoadPrice")??_??0,k=[{title:"Vehicle 1",company:i,model:w,variant:d,price:O,dp:te||0,emiSet:M},...oe.map((T,yt)=>({title:`Vehicle ${yt+2}`,company:T.company,model:T.model,variant:T.variant,price:T.onRoadPrice,dp:T.downPayment||0,emiSet:T.emiSet||"12"}))],y=(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}})(),q=String(dt||"").replace(/\D/g,""),W=t.executive||_e||y?.formDefaults?.staffName||y?.name||"-",V=re().format("DD-MM-YYYY HH:mm"),Q=[`*Hi ${l}, Welcome to ${r}! ðŸï¸*`,"Multi-brand two-wheeler sales, service, spares, exchange, finance & insurance","*Mob No - 9731366921 / 8073283502*","",`â€¢ *Quotation Date:* ${V}`],B=T=>T==="12"?[12,18,24,36]:[24,30,36,48],b=k.map(T=>{const yt=B(T.emiSet),Rn=F==="loan"?[`   â€“ Down Payment: ${ie(T.dp||0)}`,...yt.map(Qt=>`   â€“ ${Qt} months: ${ie(Ve(T.price,T.dp||0,Qt))}`)]:[];return["",`*${T.title}:*`,`â€¢ *Vehicle:* ${T.company} ${T.model} ${T.variant}`,`â€¢ *On-Road Price:* ${ie(T.price)}`,...F==="loan"?["â€¢ *EMI Options (approx.):*",...Rn]:[]].join(`
`)}),S=Array.isArray(de)?de.filter(Boolean):[],L=Array.isArray(ge)?ge.filter(Boolean):[],Ce=["",...S.length?["*Free Extra Fittings:*",...S.map(T=>`   âœ… ${T}`)]:[],...L.length?["","*Documents Required:*",...L.map(T=>`   ðŸ“„ ${T}`)]:[]],ft=["",`â€¢ *Sales Executive:* ${W} (${q||"-"})`,"*Our Locations* ðŸ“","Muddinapalya â€¢ Hegganahalli â€¢ Nelagadrahalli â€¢ Andrahalli","Kadabagere â€¢ Channenahalli â€¢ Tavarekere ","","â€¢ *Note:* Prices are indicative and may change without prior notice.","",`âœ¨ *${r} â€” Ride with Pride, Drive with Confidence.* âœ¨`],Ge=[...Q,...b,...Ce,...ft].join(`
`),Oe=`https://wa.me/${n}?text=${encodeURIComponent(Ge)}`;window.open(Oe,"_blank","noopener,noreferrer")||(window.location.href=Oe),setTimeout(pt,1e3)}catch(t){me.warning(t?.message||"Please fill all required fields before sending on WhatsApp.");try{await a.validateFields(et)}catch(n){wt(a,n)}}},_t=({items:t})=>t?.length?e.jsx("ul",{className:"plist",children:t.map((n,r)=>e.jsx("li",{children:n},`${n}-${r}`))}):e.jsx("span",{children:"-"}),An=t=>Be(c.filter(n=>R(n.company)===R(t)).map(n=>n.model)),In=(t,n)=>Be(c.filter(r=>R(r.company)===R(t)&&R(r.model)===R(n)).map(r=>r.variant)),ye=(t,n)=>{v(r=>{const l=[...r],i={...l[t],...n};if(!I&&n.variant){const w=c.find(d=>R(d.company)===R(i.company||"")&&R(d.model)===R(i.model||"")&&R(d.variant)===R(n.variant));w&&(i.onRoadPrice=w.onRoadPrice||0,i.downPayment=0)}return!I&&n.company&&(i.model="",i.variant="",i.onRoadPrice=0,i.downPayment=0),!I&&n.model&&(i.variant="",i.onRoadPrice=0,i.downPayment=0),l[t]=i,l})},Mn=()=>{v(t=>t.length>=3?t:[...t,Ea()])},$n=t=>{v(n=>n.filter((r,l)=>l!==t))};return e.jsxs(e.Fragment,{children:[un,e.jsx("style",{children:`
        .wrap { max-width: 1000px; margin: 12px auto; padding: 0 12px; }
        .card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 12px; }
        /* Make header actions stack on small screens */
        @media screen and (max-width: 600px) {
          .brand-actions-row { grid-template-columns: 1fr !important; row-gap: 8px; }
          .brand-actions { align-items: flex-start !important; }
        }
        .print-sheet { display: none; }
        @media print { .print-sheet { display: block; } .no-print { display: none !important; } }
      `}),e.jsx("div",{className:"wrap no-print",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8}}),e.jsx(j,{layout:"vertical",form:a,initialValues:{},onValuesChange:Cn,children:e.jsxs(Xt,{gutter:[12,8],children:[e.jsx(N,{span:24,children:e.jsxs("div",{className:"brand-actions-row",style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:12},children:[e.jsx(j.Item,{label:"Brand on Print",style:{marginBottom:0},children:e.jsxs(z.Group,{value:o,onChange:t=>h(t.target.value),children:[e.jsx(z,{value:"SHANTHA",children:"Shantha Motors"}),e.jsx(z,{value:"NH",children:"NH Motors (Honda)"})]})}),e.jsxs("div",{className:"brand-actions",style:{display:"flex",flexDirection:"row",gap:8,alignItems:"center"},children:[e.jsx(ya,{form:a,webhookUrl:He,EXECUTIVES:bt,setBrand:h,setMode:Z,setVehicleType:Me,setFittings:je,setDocsReq:Pe,setEmiSet:X,setDownPayment:J,setOnRoadPrice:K,setCompany:C,setModel:g,setVariant:E,setExtraVehicles:v,setFollowUpEnabled:ot,setFollowUpAt:it,setFollowUpNotes:rt,onPayloadApplied:lt,autoApply:dn,buttonText:"Fetch Details",buttonProps:{style:{background:"#2ECC71",borderColor:"#2ECC71",color:"#fff"}}}),e.jsx(ne,{onClick:async()=>{Ue(!0),await ht()},children:Qe===null?"PendingCases":`PendingCases (${Qe})`})]})]})}),e.jsx(jt,{title:Qe!==null?`PendingCases (${Qe})`:"PendingCases",open:sn,onCancel:()=>Ue(!1),footer:[e.jsx(ne,{onClick:()=>ht(),children:"Refresh"},"refresh"),e.jsx(ne,{type:"primary",onClick:()=>Ue(!1),children:"Close"},"close")],children:ln?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:16},children:e.jsx(Jt,{})}):st.length?e.jsx(tt,{size:"small",dataSource:st,renderItem:t=>e.jsx(tt.Item,{actions:[e.jsx(ne,{size:"small",type:"primary",onClick:()=>{t?.payload&&(mn({payload:t.payload,token:Date.now()}),Ue(!1),Ae(n=>n.filter(r=>r.serial!==t.serial)))},children:"Open"})],children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:2,width:"100%"},children:[e.jsx("div",{style:{fontWeight:600},children:t.name||"-"}),e.jsxs("div",{children:["ðŸ“ž ",t.mobile||"-"," | ðŸ§¾ ",t.serial||"-"]}),e.jsxs("div",{children:["ðŸï¸ ",t.vehicle||"-"," | ðŸ¢ ",t.branch||"-"]}),t.followUpAt?e.jsxs("div",{children:["ðŸ—“ï¸ ",t.followUpAt]}):null,t.followUpNotes?e.jsx("div",{style:{color:"#666"},children:t.followUpNotes}):null]})})}):e.jsx("div",{style:{color:"#666"},children:"No pending quotations."})}),e.jsx(N,{span:24,children:e.jsxs(j.Item,{label:"Type manually (no sheet)",valuePropName:"checked",children:[e.jsx(Ct,{checked:I,onChange:D}),e.jsx("span",{style:{marginLeft:8,color:"#666"},children:le?"You can still switch to manual if needed.":"Sheet unavailable â€” manual mode enabled."})]})}),e.jsx(N,{xs:24,sm:12,md:6,children:e.jsx(j.Item,{label:"Quotation No.",name:"serialNo",children:e.jsx(G,{placeholder:"Auto at save",readOnly:!0})})}),e.jsx(N,{xs:24,sm:12,md:6,children:e.jsx(j.Item,{label:"Branch",name:"branch",rules:[{required:!0,message:"Branch is required"}],children:qe&&ke.length?e.jsx(be,{placeholder:"Select branch",value:Fe,onChange:t=>yn(t),options:ke.map(t=>({value:t.name,label:t.name}))}):e.jsx(G,{readOnly:!0,placeholder:"Auto-fetched from your profile"})})}),e.jsx(N,{xs:24,sm:12,md:6,children:e.jsx(j.Item,{label:"Executive Name",name:"executive",rules:[{required:!0,message:"Executive is required"}],children:qe?e.jsx(be,{showSearch:!0,optionFilterProp:"label",placeholder:"Select executive",options:(Le.length?Le:bt).map(t=>({value:t.name,label:t.name}))}):e.jsx(G,{readOnly:!0,placeholder:"Auto-fetched from your profile"})})}),e.jsx(N,{xs:24,sm:12,md:6,children:e.jsx(j.Item,{label:"Payment Mode",children:e.jsxs(z.Group,{optionType:"button",buttonStyle:"solid",value:F,onChange:t=>Z(t.target.value),children:[e.jsx(z.Button,{value:"loan",children:"Loan"}),e.jsx(z.Button,{value:"cash",children:"Cash"})]})})}),e.jsx(N,{xs:24,sm:12,md:12,children:e.jsx(j.Item,{label:"Customer Name",name:"name",rules:[{required:!0,message:"Enter name"}],getValueFromEvent:t=>{const n=t?.target?.value??t;return typeof n=="string"?n.toUpperCase():n},children:e.jsx(G,{placeholder:"CUSTOMER NAME",style:{textTransform:"uppercase"}})})}),e.jsx(N,{xs:24,sm:12,md:12,children:e.jsx(j.Item,{label:"Mobile Number",name:"mobile",rules:$a,normalize:t=>t&&t.replace(/\D/g,"").slice(0,10),children:e.jsx(G,{placeholder:"10-digit mobile",maxLength:10})})}),e.jsx(N,{xs:24,children:e.jsx(j.Item,{label:"Address",name:"address",rules:[{message:"Enter address"}],children:e.jsx(G.TextArea,{rows:2,placeholder:"House No, Street, Area, City, PIN"})})}),e.jsx(N,{span:24,children:e.jsx(xt,{orientation:"left",children:"Vehicle 1"})}),e.jsx(N,{xs:24,sm:12,md:8,children:e.jsx(j.Item,{label:"Company",name:"company",rules:[{required:!0,message:"Enter company"}],children:I?e.jsx(G,{placeholder:"Type company",onChange:t=>C(t.target.value)}):e.jsx(be,{placeholder:"Select Company",options:Tt.map(t=>({value:t,label:t})),onChange:t=>{C(t),g(""),E(""),K(0),J(0),a.setFieldsValue({bikeModel:void 0,variant:void 0,onRoadPrice:void 0})}})})}),e.jsx(N,{xs:24,sm:12,md:8,children:e.jsx(j.Item,{label:"Model",name:"bikeModel",rules:[{required:!0,message:"Enter model"}],children:I?e.jsx(G,{placeholder:"Type model",onChange:t=>g(t.target.value)}):e.jsx(be,{placeholder:"Select Model",disabled:!f,options:bn.map(t=>({value:t,label:t})),onChange:t=>{g(t),E(""),K(0),J(0),a.setFieldsValue({variant:void 0,onRoadPrice:void 0})}})})}),e.jsx(N,{xs:24,sm:12,md:8,children:e.jsx(j.Item,{label:"Variant",name:"variant",rules:[{required:!0,message:"Enter variant"}],children:I?e.jsx(G,{placeholder:"Type variant",onChange:t=>E(t.target.value)}):e.jsx(be,{placeholder:"Select Variant",disabled:!p,options:vn.map(t=>({value:t,label:t})),onChange:wn})})}),e.jsx(N,{xs:24,sm:12,md:24,children:e.jsx(j.Item,{label:"On-Road Price (â‚¹)",name:"onRoadPrice",rules:[{required:!0,message:"Enter on-road price"},()=>({validator(t,n){return Number(n||0)>0?Promise.resolve():Promise.reject(new Error("On-road price must be greater than 0"))}})],children:e.jsx(Ke,{style:{width:"100%"},readOnly:!I,formatter:t=>`â‚¹ ${String(t??"0").replace(/\B(?=(\d{3})+(?!\d))/g,",")}`,parser:t=>String(t||"0").replace(/[â‚¹,\s]/g,"")})})}),F==="loan"&&e.jsxs(e.Fragment,{children:[e.jsx(N,{xs:24,sm:12,md:12,children:e.jsx(j.Item,{label:"Down Payment (â‚¹)",name:"downPayment",rules:[{required:!0,message:"Down payment is required for loan"},()=>({validator(t,n){const r=Number(n||0);return!Number.isFinite(r)||r<=0?Promise.reject(new Error("Enter a positive amount")):r>Number(_||0)?Promise.reject(new Error("Down payment cannot exceed on-road price")):Promise.resolve()}})],children:e.jsx(Ke,{style:{width:"100%"},min:0,max:_,step:1e3,value:te,onChange:t=>{const n=Math.min(Number(t||0),_||0);J(n),a.setFieldsValue({downPayment:n})},formatter:t=>`â‚¹ ${String(t??"0").replace(/\B(?=(\d{3})+(?!\d))/g,",")}`,parser:t=>String(t||"0").replace(/[â‚¹,\s]/g,"")})})}),e.jsx(N,{xs:24,children:e.jsx(j.Item,{label:"EMI Set",children:e.jsxs(z.Group,{value:M,onChange:t=>X(t.target.value),children:[e.jsx(z,{value:"12",children:"12"}),e.jsx(z,{value:"48",children:"48"})]})})}),e.jsx(N,{xs:24,children:e.jsx("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:ee.map(t=>e.jsxs("div",{className:"emibox",style:{minWidth:140},children:[e.jsxs("div",{style:{fontWeight:700},children:[t," months"]}),e.jsx("div",{style:{fontWeight:900,fontSize:16},children:ie(Ve(_,te,t))})]},t))})})]}),e.jsx(N,{xs:24,md:12,children:e.jsx(j.Item,{label:"Vehicle Type",name:"vehicleType",children:e.jsxs(z.Group,{optionType:"button",buttonStyle:"solid",value:Se,onChange:t=>Me(t.target.value),children:[e.jsx(z.Button,{value:"scooter",children:"Scooter"}),e.jsx(z.Button,{value:"motorcycle",children:"Motorcycle"})]})})}),e.jsx(N,{xs:24,md:12,children:e.jsx(j.Item,{label:"Free Extra Fittings (shown on print)",children:e.jsx(Xe.Group,{value:de,onChange:je,children:(Se==="scooter"?ka:Aa).map(t=>e.jsx("div",{style:{marginBottom:6},children:e.jsx(Xe,{value:t,children:t})},t))})})}),e.jsx(N,{xs:24,children:e.jsx(j.Item,{label:"Documents Required (always printed)",children:e.jsx(Xe.Group,{value:ge,onChange:Pe,children:vt.map((t,n)=>e.jsx("div",{style:{marginBottom:6},children:e.jsx(Xe,{value:t,children:t})},`${t}-${n}`))})})}),e.jsx(N,{span:24,children:e.jsx(xt,{orientation:"left",children:"Follow-up"})}),e.jsx(N,{xs:24,md:8,children:e.jsx(j.Item,{label:"Schedule follow-up?",children:e.jsx(Ct,{checked:Re,onChange:ot})})}),e.jsx(N,{xs:24,md:8,children:e.jsx(j.Item,{label:"Follow-up date & time",children:e.jsx(Bn,{showTime:!0,style:{width:"100%"},value:ze,onChange:it,disabled:!Re})})}),e.jsx(N,{xs:24,md:8,children:e.jsx(j.Item,{label:"Follow-up notes",children:e.jsx(G,{placeholder:"e.g., Customer will decide after salary",value:At,onChange:t=>rt(t.target.value),disabled:!Re})})}),e.jsxs(N,{span:24,children:[e.jsx(xt,{orientation:"left",children:"Additional Vehicles"}),oe.map((t,n)=>{const r=n+2,l=I?[]:An(t.company),i=I?[]:In(t.company,t.model),w=jn(t.emiSet||"12");return e.jsx("div",{style:{border:"1px dashed #d4d4d8",borderRadius:8,padding:12,marginBottom:12},children:e.jsxs(Xt,{gutter:[12,8],align:"middle",children:[e.jsx(N,{span:24,children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("strong",{children:["Vehicle ",r]}),e.jsx(ne,{danger:!0,type:"text",icon:e.jsx(fa,{}),onClick:()=>$n(n),children:"Remove"})]})}),e.jsx(N,{xs:24,md:8,children:I?e.jsx(G,{placeholder:"Company",value:t.company,onChange:d=>ye(n,{company:d.target.value})}):e.jsx(be,{placeholder:"Select Company",value:t.company||void 0,options:Tt.map(d=>({value:d,label:d})),onChange:d=>ye(n,{company:d})})}),e.jsx(N,{xs:24,md:8,children:I?e.jsx(G,{placeholder:"Model",value:t.model,onChange:d=>ye(n,{model:d.target.value})}):e.jsx(be,{placeholder:"Select Model",disabled:!t.company,value:t.model||void 0,options:l.map(d=>({value:d,label:d})),onChange:d=>ye(n,{model:d})})}),e.jsx(N,{xs:24,md:8,children:I?e.jsx(G,{placeholder:"Variant",value:t.variant,onChange:d=>ye(n,{variant:d.target.value})}):e.jsx(be,{placeholder:"Select Variant",disabled:!t.model,value:t.variant||void 0,options:i.map(d=>({value:d,label:d})),onChange:d=>ye(n,{variant:d})})}),e.jsx(N,{xs:24,md:12,children:e.jsx(Ke,{style:{width:"100%"},placeholder:"On-Road Price (â‚¹)",value:t.onRoadPrice,readOnly:!I,onChange:d=>ye(n,{onRoadPrice:Number(d||0)}),formatter:d=>`â‚¹ ${String(d??"0").replace(/\B(?=(\d{3})+(?!\d))/g,",")}`,parser:d=>String(d||"0").replace(/[â‚¹,\s]/g,"")})}),F==="loan"&&e.jsxs(e.Fragment,{children:[e.jsx(N,{xs:24,md:12,children:e.jsx(Ke,{style:{width:"100%"},placeholder:"Down Payment (â‚¹)",min:0,max:t.onRoadPrice||0,step:1e3,value:t.downPayment||0,onChange:d=>ye(n,{downPayment:Math.min(Number(d||0),t.onRoadPrice||0)}),formatter:d=>`â‚¹ ${String(d??"0").replace(/\B(?=(\d{3})+(?!\d))/g,",")}`,parser:d=>String(d||"0").replace(/[â‚¹,\s]/g,"")})}),e.jsxs(N,{xs:24,children:[e.jsxs(z.Group,{value:t.emiSet||"12",onChange:d=>ye(n,{emiSet:d.target.value}),style:{marginBottom:8},children:[e.jsx(z,{value:"12",children:"12"}),e.jsx(z,{value:"48",children:"48"})]}),e.jsx("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:w.map(d=>e.jsxs("div",{className:"emibox",style:{minWidth:140},children:[e.jsxs("div",{style:{fontWeight:700},children:[d," months"]}),e.jsx("div",{style:{fontWeight:900,fontSize:16},children:ie(Ve(t.onRoadPrice||0,t.downPayment||0,d))})]},d))})]})]})]})},n)}),e.jsx(ne,{icon:e.jsx(oa,{}),onClick:Mn,disabled:oe.length>=3,children:"Add Vehicle"}),oe.length>=3&&e.jsx("span",{style:{marginLeft:8,color:"#666"},children:"(Maximum 4 vehicles per quotation)"})]}),e.jsxs(N,{span:24,style:{textAlign:"right"},children:[e.jsx("div",{style:{marginBottom:8,textAlign:"left",color:"#888",fontSize:12},children:!gt&&e.jsxs("span",{children:["Fill ",e.jsx("b",{children:"Branch"}),", ",e.jsx("b",{children:"Executive"}),", ",e.jsx("b",{children:"Customer Name"}),", ",e.jsx("b",{children:"Mobile"}),", and ",e.jsx("b",{children:"Vehicle Details"})," to proceed."]})}),e.jsx(ne,{className:"no-print",onClick:kn,disabled:!gt||ce||Y>0,style:{marginRight:8,background:"#25D366",borderColor:"#25D366",color:"#fff"},children:"WhatsApp"}),e.jsx(ne,{className:"no-print",type:"primary",icon:e.jsx(na,{}),onClick:ut,disabled:!gt||ce||Y>0||ae,loading:ae,children:"Print"})]})]})})]})}),e.jsx("div",{className:"print-sheet",children:e.jsx("div",{className:"page",ref:Ft,children:e.jsxs("div",{className:"sheet",children:[e.jsxs("div",{className:"hdr-line",children:[e.jsxs("div",{style:{textAlign:"center",marginRight:12},children:[e.jsx("img",{src:"/location-qr.png",alt:"Location QR",style:{height:50,objectFit:"contain"}}),e.jsx("div",{style:{fontSize:8,fontWeight:600,marginTop:4},children:"Scan for Location"})]}),e.jsx("div",{className:"hdr-title",children:e.jsx("div",{className:"quo-box",children:"QUOTATION"})}),e.jsxs("div",{className:"hdr-right",children:[e.jsxs("div",{children:["Sl. No.: ",a.getFieldValue("serialNo")||"-"]}),e.jsxs("div",{children:["Date: ",pn]})]})]}),e.jsx("div",{style:{borderBottom:"2px solid #000",paddingBottom:6,marginBottom:8},children:e.jsxs("div",{className:"brand-row2",style:{display:"grid",gridTemplateColumns:"1fr auto",columnGap:16,alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",alignItems:"baseline",gap:10,flexWrap:"wrap",marginBottom:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o==="SHANTHA"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title-kn",style:{fontSize:"25pt",fontWeight:800},children:"à²¶à²¾à²‚à²¤ à²®à³‹à²Ÿà²°à³à²¸à³"}),e.jsx("div",{className:"title-en",style:{fontSize:"20pt",fontWeight:800},children:"Shantha Motors"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title-knhonda",style:{fontSize:"25pt",fontWeight:800},children:"à²Žà²¨à³ à²Žà²šà³ à²®à³‹à²Ÿà²°à³à²¸à³"}),e.jsx("div",{className:"title-en",style:{fontSize:"18pt",fontWeight:700},children:"NH Motors"})]})}),o==="SHANTHA"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"addr-line",style:{fontSize:"13pt"},children:"â€¢ Muddinapalya â€¢ Hegganahalli   â€¢ Nelagadrahalli  â€¢ Andrahalli"}),e.jsx("div",{className:"addr-line",style:{fontSize:"13pt"},children:"â€¢ Kadabagere   â€¢ Channenahali  â€¢ Tavarekere"}),e.jsx("div",{style:{marginTop:6,fontWeight:600},children:"Mob: 9731366921 / 8073283502 / 9035131806"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"addr-linehonda",style:{fontSize:"12pt"},children:"Site No. 116/1, Bydarahalli, Magadi Main Road, Opp. HP Petrol Bunk, Bangalore - 560091"}),e.jsx("div",{style:{marginTop:6,fontWeight:600},children:"Mob: 9731366921 / 8073283502 / 9741609799"})]})]}),e.jsx("div",{className:"brand-right",style:{display:"flex",flexDirection:"row",alignItems:"center",gap:16,justifyContent:"flex-end"},children:e.jsx("img",{src:o==="SHANTHA"?"/shantha-logoprint.jpg":"/honda-logo.png",alt:"Brand Logo",style:{height:130,objectFit:"contain"}})})]})}),e.jsxs("div",{className:"box",style:{marginBottom:8},children:[e.jsx("div",{className:"section-title",children:"Customer Details"}),e.jsxs("div",{className:"row2",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Name:"})," ",a.getFieldValue("name")||"-"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Mobile:"})," ",a.getFieldValue("mobile")||"-"]}),e.jsxs("div",{style:{gridColumn:"1 / span 2"},children:[e.jsx("b",{children:"Address:"})," ",a.getFieldValue("address")||"-"]})]})]}),e.jsxs("div",{className:"box",style:{marginBottom:8},children:[e.jsx("div",{className:"section-title",children:"Vehicle 1 Details"}),e.jsxs("div",{className:"row3",style:{fontSize:"12pt"},children:[e.jsxs("div",{children:[e.jsx("b",{children:"Company:"})," ",f||a.getFieldValue("company")||"-"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Model:"})," ",p||a.getFieldValue("bikeModel")||"-"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Variant:"})," ",P||a.getFieldValue("variant")||"-"]})]}),e.jsx("div",{style:{marginTop:6,textAlign:"center"},children:e.jsxs("span",{className:"big-price",children:[e.jsxs("span",{children:[e.jsx("b",{children:"On-Road Price:"})," "]}),ie(a.getFieldValue("onRoadPrice")??_??0)]})})]}),F==="loan"&&e.jsx("div",{className:"box",style:{marginBottom:8},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"0.5fr 2fr",gap:12,alignItems:"start"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,marginBottom:4,fontSize:"12pt"},children:"Down Payment"}),e.jsx("div",{style:{fontWeight:800,fontSize:"18pt"},children:ie(te||0)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:900,textAlign:"center",marginBottom:4,fontSize:"14pt"},children:"EMI DETAILS"}),e.jsx("div",{style:{display:"flex",gap:8,justifyContent:"space-between",flexWrap:"wrap"},children:ee.map(t=>e.jsxs("div",{className:"emibox",style:{flex:1,minWidth:120},children:[e.jsxs("div",{style:{fontWeight:700},children:[t," months"]}),e.jsx("div",{style:{fontWeight:900},children:ie(Ve(_,te,t))})]},t))})]})]})}),oe.map((t,n)=>{const r=n+2,l=(t.emiSet||"12")==="12"?[12,18,24,36]:[24,30,36,48];return e.jsxs("div",{children:[e.jsxs("div",{className:"box",style:{marginBottom:8},children:[e.jsxs("div",{className:"section-title",children:["Vehicle ",r," Details"]}),e.jsxs("div",{className:"row3",style:{fontSize:"12pt"},children:[e.jsxs("div",{children:[e.jsx("b",{children:"Company:"})," ",t.company||"-"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Model:"})," ",t.model||"-"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Variant:"})," ",t.variant||"-"]})]}),e.jsx("div",{style:{marginTop:6,textAlign:"center"},children:e.jsxs("span",{className:"big-price",children:[e.jsxs("span",{children:[e.jsx("b",{children:"On-Road Price:"})," "]}),ie(t.onRoadPrice||0)]})})]}),F==="loan"&&e.jsx("div",{className:"box",style:{marginBottom:8},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"0.5fr 2fr",gap:12,alignItems:"start"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,marginBottom:4,fontSize:"12pt"},children:"Down Payment"}),e.jsx("div",{style:{fontWeight:800,fontSize:"18pt"},children:ie(t.downPayment||0)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:900,textAlign:"center",marginBottom:4,fontSize:"14pt"},children:"EMI DETAILS"}),e.jsx("div",{style:{display:"flex",gap:8,justifyContent:"space-between",flexWrap:"wrap"},children:l.map(i=>e.jsxs("div",{className:"emibox",style:{minWidth:140},children:[e.jsxs("div",{style:{fontWeight:700},children:[i," months"]}),e.jsx("div",{style:{fontWeight:900},children:ie(Ve(t.onRoadPrice||0,t.downPayment||0,i))})]},i))})]})]})})]},n)}),e.jsxs("div",{className:"box",style:{marginBottom:8},children:[e.jsxs("div",{style:{marginBottom:6,fontSize:"13pt",fontWeight:700},children:[e.jsx("b",{children:"Executive name:"})," ",_e||"-",dt?` (${dt})`:""]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"0.6fr 1fr 1fr",gap:16,alignItems:"start"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,marginBottom:4},children:"Free Extra Fittings"}),e.jsx(_t,{items:de})]}),e.jsx("div",{style:{minHeight:120,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600},children:e.jsx("img",{src:"/shantha-access.png",alt:"Accessories",style:{height:140,margin:"6px 0"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,marginBottom:4},children:"Documents Required"}),e.jsx(_t,{items:ge})]})]})]}),e.jsxs("div",{style:{fontSize:"9.5pt",display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{}),e.jsxs("div",{children:[e.jsx("b",{children:"Note:"})," Prices are indicative and subject to change without prior notice."]})]})]})})})]})}export{co as default};

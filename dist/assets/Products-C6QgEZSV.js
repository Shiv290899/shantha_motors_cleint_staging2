import{R as f,j as o}from"./index-DByWGH7d.js";const E=()=>{const[m,z]=f.useState({tvs:[],honda:[],bajaj:[],suzuki:[],hero:[],yamaha:[],royalEnfield:[]}),[w,i]=f.useState(!0),[y,v]=f.useState(""),g=f.useCallback(c=>{const _=e=>{if(!e)return;const l=e.ex_showroom??e.exShowroom??e.ex,t=e.on_road_example??e.on_road??e.onRoad;return{ex_showroom:l,on_road_example:t}},h=e=>{const l=String(e||"").toLowerCase();return l.includes("scoot")?"scooters":l.includes("ev")||l.includes("electric")?"ev":"motorcycles"},d=(e,l="")=>e==null||e===""?"":typeof e=="number"?`${e}${l}`:String(e),b=()=>{const e=(l,t)=>(c.products?.[l]||[]).map(n=>({model:n.model,engine:d(n.specs?.engine_cc," cc"),power:d(n.specs?.power),mileage:d(n.specs?.mileage),image_url:n.image_url||"",variants:(n.variants||[]).map(j=>typeof j=="string"?{name:j}:{name:j.name,details:j.details||""}),product_url:n.product_url||"",price:_(n.price),type:t}));return[...e("motorcycles","motorcycles"),...e("scooters","scooters"),...e("ev","ev")]},r=()=>{const e=(c.motorcycles||[]).map(t=>({model:t.model,engine:d(t.engine||t.specs?.engine_capacity||t.specs?.engine_cc,t.engine?"":t.specs?.engine_cc?" cc":""),power:d(t.power||t.specs?.power),mileage:d(t.mileage||t.specs?.mileage),image_url:t.image_url||"",variants:(t.variants||[]).map(n=>typeof n=="string"?{name:n}:{name:n.name,details:n.details||""}),product_url:t.product_url||t.product_page||"",price:_(t.price),type:"motorcycles"})),l=(c.scooters||[]).map(t=>({model:t.model,engine:d(t.engine||t.specs?.engine_capacity||t.specs?.engine_cc,t.engine?"":t.specs?.engine_cc?" cc":""),power:d(t.power||t.specs?.power),mileage:d(t.mileage||t.specs?.mileage),image_url:t.image_url||"",variants:(t.variants||[]).map(n=>typeof n=="string"?{name:n}:{name:n.name,details:n.details||""}),product_url:t.product_url||t.product_page||"",price:_(t.price),type:"scooters"}));return[...e,...l]},k=()=>(Array.isArray(c)?c:[]).map(e=>({model:e.model,engine:d(e.engine||e.specs?.engine_capacity||e.specs?.engine_cc,e.engine?"":e.specs?.engine_cc?" cc":""),power:d(e.power||e.specs?.power),mileage:d(e.mileage||e.specs?.mileage),image_url:e.image_url||"",variants:(e.variants||[]).map(l=>typeof l=="string"?{name:l}:{name:l.name,details:l.details||""}),product_url:e.product_url||e.product_page||"",price:_(e.price),type:h(e.type)}));return c?.products?b():Array.isArray(c)?k():r()},[]);return f.useEffect(()=>{let c=!1;return(async()=>{i(!0),v("");try{const[h,d,b,r,k,e,l,t]=await Promise.allSettled([fetch("/honda.json").then(s=>s.ok?s.json():Promise.reject()),fetch("/tvs.json").then(s=>s.ok?s.json():Promise.reject()),fetch("/bike.txt").then(s=>s.ok?s.json():Promise.reject()),fetch("/bajaj.json").then(s=>s.ok?s.json():Promise.reject()),fetch("/suzuki.json").then(s=>s.ok?s.json():Promise.reject()),fetch("/hero.json").then(s=>s.ok?s.json():Promise.reject()),fetch("/yamaha.json").then(s=>s.ok?s.json():Promise.reject()),fetch("/royalEnfield.json").then(s=>s.ok?s.json():Promise.reject())]),n=h.status==="fulfilled"?g(h.value):[],j=d.status==="fulfilled"?g(d.value):b.status==="fulfilled"?g(b.value):[],C=r.status==="fulfilled"?g(r.value):[],R=k.status==="fulfilled"?g(k.value):[],a=e.status==="fulfilled"?g(e.value):[],p=l.status==="fulfilled"?g(l.value):[],x=t.status==="fulfilled"?g(t.value):[];c||z({honda:n,tvs:j,bajaj:C,suzuki:R,hero:a,yamaha:p,royalEnfield:x})}catch(h){console.log(h),c||v("Failed to load catalogue.")}finally{c||i(!1)}})(),()=>{c=!0}},[g]),{data:m,loading:w,error:y}};function T(){const{data:m,loading:z,error:w}=E(),[i,y]=f.useState("honda"),[v,g]=f.useState(""),[c,_]=f.useState("all"),[h,d]=f.useState("model-asc"),b=f.useMemo(()=>{const a=m[i]||[],p=u=>[u.model,u.engine,u.power,u.mileage,...(u.variants||[]).map(S=>(S?.name||"")+" "+(S?.details||""))].map(S=>String(S||"").toLowerCase()).join(" "),x=v.trim().toLowerCase(),s=a.filter(u=>c==="all"?!0:u.type===c).filter(u=>x?p(u).includes(x):!0);return s.sort((u,S)=>u.model.localeCompare(S.model)),h==="model-desc"&&s.reverse(),s},[m,i,v,c,h]),r={page:{maxWidth:1100,margin:"0 auto",padding:16},header:{display:"grid",gap:10},seg:{display:"inline-flex",gap:6,marginTop:6,background:"#eef5ff",padding:4,borderRadius:12,border:"1px solid #e3ecfb"},tab:(a,p)=>({appearance:"none",border:0,background:a?"#fff":"transparent",padding:"8px 12px",borderRadius:10,cursor:p?"not-allowed":"pointer",fontWeight:600,color:p?"#9aa7b8":a?"#0b3da6":"#0f172a",boxShadow:a?"0 2px 0 0 #cfe0ff inset, 0 1px 8px rgba(22,119,255,.12)":"none"}),controls:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginTop:10},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px,1fr))",gap:16,padding:"18px 0 28px"},media:{aspectRatio:"16/9",width:"100%",objectFit:"cover",background:"#eef2f7"},card:{background:"#fff",border:"1px solid #e6edf6",borderRadius:16,overflow:"hidden",boxShadow:"0 8px 28px rgba(22,119,255,.08)",display:"flex",flexDirection:"column"},body:{padding:"12px 14px 8px"},model:{margin:0,marginBottom:6,fontSize:18,lineHeight:1.25},meta:{margin:0,color:"#475569",fontSize:13},empty:{padding:24,textAlign:"center",color:"#475569",border:"1px dashed #d9e1ec",borderRadius:12,background:"#fff"}},k=a=>o.jsxs("div",{style:r.card,role:"listitem",children:[a.image_url?o.jsx("img",{src:a.image_url,alt:a.model,style:r.media,onError:p=>{p.currentTarget.replaceWith(Object.assign(document.createElement("div"),{className:"media-fallback"}))}}):o.jsx("div",{style:{...r.media,display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",fontSize:13},children:"Image unavailable"}),o.jsxs("div",{style:r.body,children:[o.jsx("h3",{style:r.model,children:a.model}),o.jsx("p",{style:r.meta,children:[a.engine&&`Engine: ${a.engine}`,a.power&&`Power: ${a.power}`,a.mileage&&`Mileage: ${a.mileage}`].filter(Boolean).join("  •  ")||"Specs TBA"}),!!a.variants?.length&&o.jsxs("details",{children:[o.jsxs("summary",{children:["Variants (",a.variants.length,")"]}),o.jsx("ul",{style:{margin:"6px 0 0 18px",padding:0},children:a.variants.map((p,x)=>{const s=typeof p=="string"?p:p?.name||"Variant",u=typeof p=="string"?"":p?.details||"";return o.jsx("li",{style:{color:"#475569",fontSize:13},children:u?`${s} — ${u}`:s},x)})})]}),a.price&&(a.price.ex_showroom||a.price.on_road_example||a.price.on_road)&&o.jsx("p",{style:r.meta,children:[a.price.ex_showroom&&`Ex-showroom: ${a.price.ex_showroom}`,(a.price.on_road_example||a.price.on_road)&&`On-road: ${a.price.on_road_example||a.price.on_road}`].filter(Boolean).join("  •  ")}),a.product_url&&o.jsx("a",{href:a.product_url,target:"_blank",rel:"noopener",style:{color:"#1677ff",display:"inline-block",marginTop:8},children:"View details"})]})]},`${a.model}-${a.product_url||a.image_url||Math.random()}`),e=(m.honda||[]).length>0,l=(m.tvs||[]).length>0,t=(m.bajaj||[]).length>0,n=(m.suzuki||[]).length>0,j=(m.hero||[]).length>0,C=(m.yamaha||[]).length>0,R=(m.royalEnfield||[]).length>0;return o.jsxs("div",{style:r.page,children:[o.jsx("h1",{style:{margin:0,fontSize:22},children:"Products"}),o.jsxs("div",{style:r.seg,role:"tablist","aria-label":"Brand",children:[o.jsx("button",{role:"tab","aria-selected":i==="honda",onClick:()=>y("honda"),disabled:!e,style:r.tab(i==="honda",!e),children:"Honda"}),o.jsx("button",{role:"tab","aria-selected":i==="tvs",onClick:()=>y("tvs"),disabled:!l,style:r.tab(i==="tvs",!l),children:"TVS"}),o.jsx("button",{role:"tab","aria-selected":i==="bajaj",onClick:()=>y("bajaj"),disabled:!t,style:r.tab(i==="bajaj",!t),children:"Bajaj"}),o.jsx("button",{role:"tab","aria-selected":i==="suzuki",onClick:()=>y("suzuki"),disabled:!n,style:r.tab(i==="suzuki",!n),children:"Suzuki"}),o.jsx("button",{role:"tab","aria-selected":i==="hero",onClick:()=>y("hero"),disabled:!j,style:r.tab(i==="hero",!j),children:"Hero"}),o.jsx("button",{role:"tab","aria-selected":i==="yamaha",onClick:()=>y("yamaha"),disabled:!C,style:r.tab(i==="yamaha",!C),children:"Yamaha"}),o.jsx("button",{role:"tab","aria-selected":i==="royalEnfield",onClick:()=>y("royalEnfield"),disabled:!R,style:r.tab(i==="royalEnfield",!R),children:"Royal Enfield"})]}),o.jsxs("div",{style:r.controls,children:[o.jsxs("select",{value:c,onChange:a=>_(a.target.value),children:[o.jsx("option",{value:"all",children:"All Types"}),o.jsx("option",{value:"motorcycles",children:"Motorcycles"}),o.jsx("option",{value:"scooters",children:"Scooters"}),o.jsx("option",{value:"ev",children:"EV"})]}),o.jsx("input",{value:v,onChange:a=>g(a.target.value),placeholder:"Search model or variant..."}),o.jsxs("select",{value:h,onChange:a=>d(a.target.value),style:{gridColumn:"1 / -1"},children:[o.jsx("option",{value:"model-asc",children:"Sort: Model A → Z"}),o.jsx("option",{value:"model-desc",children:"Sort: Model Z → A"})]})]}),z?o.jsx("div",{style:r.empty,children:"Loading catalogue…"}):w?o.jsx("div",{style:r.empty,children:w}):b.length?o.jsx("div",{style:r.grid,role:"list",children:b.map(k)}):o.jsx("div",{style:r.empty,children:"No matching bikes. Try a different search."})]})}export{T as default};
